{
    "title": "HelmValues",
    "description": "Schema for Helm values.",
    "type": "object",
    "properties": {
        "dagit": {
            "$ref": "#/definitions/Dagit"
        },
        "postgresql": {
            "$ref": "#/definitions/PostgreSQL"
        },
        "rabbitmq": {
            "$ref": "#/definitions/RabbitMQ"
        },
        "redis": {
            "$ref": "#/definitions/Redis"
        },
        "flower": {
            "$ref": "#/definitions/Flower"
        },
        "ingress": {
            "$ref": "#/definitions/Ingress"
        },
        "imagePullSecrets": {
            "title": "Imagepullsecrets",
            "type": "array",
            "items": {
                "$ref": "#/definitions/SecretRef"
            }
        },
        "computeLogManager": {
            "$ref": "#/definitions/ComputeLogManager"
        },
        "scheduler": {
            "$ref": "#/definitions/Scheduler"
        }
    },
    "required": [
        "dagit",
        "postgresql",
        "rabbitmq",
        "redis",
        "flower",
        "ingress",
        "imagePullSecrets",
        "computeLogManager",
        "scheduler"
    ],
    "definitions": {
        "PullPolicy": {
            "title": "PullPolicy",
            "description": "An enumeration.",
            "enum": [
                "Always",
                "IfNotPresent",
                "Never"
            ],
            "type": "string"
        },
        "Image": {
            "title": "Image",
            "type": "object",
            "properties": {
                "repository": {
                    "title": "Repository",
                    "type": "string"
                },
                "tag": {
                    "title": "Tag",
                    "type": "string"
                },
                "pullPolicy": {
                    "$ref": "#/definitions/PullPolicy"
                }
            },
            "required": [
                "repository",
                "tag",
                "pullPolicy"
            ]
        },
        "Annotations": {
            "title": "Annotations",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.apimachinery.pkg.apis.meta.v1.ObjectMeta/properties/annotations"
        },
        "automation__helm__schema__subschema__kubernetes__Service": {
            "title": "Service",
            "type": "object",
            "properties": {
                "type": {
                    "title": "Type",
                    "type": "string"
                },
                "port": {
                    "title": "Port",
                    "type": "integer"
                },
                "annotations": {
                    "$ref": "#/definitions/Annotations"
                }
            },
            "required": [
                "type",
                "port"
            ],
            "additionalProperties": false
        },
        "NodeSelector": {
            "title": "NodeSelector",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/nodeSelector"
        },
        "Affinity": {
            "title": "Affinity",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.Affinity"
        },
        "Tolerations": {
            "title": "Tolerations",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/tolerations"
        },
        "PodSecurityContext": {
            "title": "PodSecurityContext",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.PodSecurityContext"
        },
        "SecurityContext": {
            "title": "SecurityContext",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.SecurityContext"
        },
        "Resources": {
            "title": "Resources",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.ResourceRequirements"
        },
        "LivenessProbe": {
            "title": "LivenessProbe",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.Probe"
        },
        "StartupProbe": {
            "title": "StartupProbe",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.16.0/_definitions.json#/definitions/io.k8s.api.core.v1.Probe"
        },
        "Dagit": {
            "title": "Dagit",
            "type": "object",
            "properties": {
                "replicaCount": {
                    "title": "Replicacount",
                    "type": "integer"
                },
                "image": {
                    "$ref": "#/definitions/Image"
                },
                "service": {
                    "$ref": "#/definitions/automation__helm__schema__subschema__kubernetes__Service"
                },
                "nodeSelector": {
                    "$ref": "#/definitions/NodeSelector"
                },
                "affinity": {
                    "$ref": "#/definitions/Affinity"
                },
                "tolerations": {
                    "$ref": "#/definitions/Tolerations"
                },
                "podSecurityContext": {
                    "$ref": "#/definitions/PodSecurityContext"
                },
                "securityContext": {
                    "$ref": "#/definitions/SecurityContext"
                },
                "resources": {
                    "$ref": "#/definitions/Resources"
                },
                "livenessProbe": {
                    "$ref": "#/definitions/LivenessProbe"
                },
                "startupProbe": {
                    "$ref": "#/definitions/StartupProbe"
                },
                "annotations": {
                    "$ref": "#/definitions/Annotations"
                }
            },
            "required": [
                "replicaCount",
                "image",
                "service"
            ]
        },
        "automation__helm__schema__subschema__postgresql__Service": {
            "title": "Service",
            "type": "object",
            "properties": {
                "port": {
                    "title": "Port",
                    "type": "integer"
                }
            },
            "required": [
                "port"
            ]
        },
        "PostgreSQL": {
            "title": "PostgreSQL",
            "type": "object",
            "properties": {
                "image": {
                    "$ref": "#/definitions/Image"
                },
                "enabled": {
                    "title": "Enabled",
                    "type": "boolean"
                },
                "postgresqlHost": {
                    "title": "Postgresqlhost",
                    "type": "string"
                },
                "postgresqlUsername": {
                    "title": "Postgresqlusername",
                    "type": "string"
                },
                "postgresqlPassword": {
                    "title": "Postgresqlpassword",
                    "type": "string"
                },
                "postgresqlDatabase": {
                    "title": "Postgresqldatabase",
                    "type": "string"
                },
                "service": {
                    "$ref": "#/definitions/automation__helm__schema__subschema__postgresql__Service"
                }
            },
            "required": [
                "image",
                "enabled",
                "postgresqlHost",
                "postgresqlUsername",
                "postgresqlPassword",
                "postgresqlDatabase",
                "service"
            ]
        },
        "RabbitMQConfiguration": {
            "title": "RabbitMQConfiguration",
            "type": "object",
            "properties": {
                "username": {
                    "title": "Username",
                    "type": "string"
                },
                "password": {
                    "title": "Password",
                    "type": "string"
                }
            },
            "required": [
                "username",
                "password"
            ]
        },
        "automation__helm__schema__subschema__rabbitmq__Service": {
            "title": "Service",
            "type": "object",
            "properties": {
                "port": {
                    "title": "Port",
                    "type": "integer"
                }
            },
            "required": [
                "port"
            ]
        },
        "VolumePermissions": {
            "title": "VolumePermissions",
            "type": "object",
            "properties": {
                "enabled": {
                    "title": "Enabled",
                    "const": true,
                    "type": "boolean"
                }
            }
        },
        "RabbitMQ": {
            "title": "RabbitMQ",
            "type": "object",
            "properties": {
                "enabled": {
                    "title": "Enabled",
                    "type": "boolean"
                },
                "rabbitmq": {
                    "$ref": "#/definitions/RabbitMQConfiguration"
                },
                "service": {
                    "$ref": "#/definitions/automation__helm__schema__subschema__rabbitmq__Service"
                },
                "volumePermissions": {
                    "$ref": "#/definitions/VolumePermissions"
                }
            },
            "required": [
                "enabled",
                "rabbitmq",
                "service",
                "volumePermissions"
            ]
        },
        "Redis": {
            "title": "Redis",
            "type": "object",
            "properties": {
                "enabled": {
                    "title": "Enabled",
                    "type": "boolean"
                },
                "host": {
                    "title": "Host",
                    "type": "string"
                },
                "port": {
                    "title": "Port",
                    "type": "integer"
                },
                "brokerDbNumber": {
                    "title": "Brokerdbnumber",
                    "type": "integer"
                },
                "backendDbNumber": {
                    "title": "Backenddbnumber",
                    "type": "integer"
                }
            },
            "required": [
                "enabled",
                "host",
                "port",
                "brokerDbNumber",
                "backendDbNumber"
            ],
            "additionalProperties": false
        },
        "Flower": {
            "title": "Flower",
            "type": "object",
            "properties": {
                "enabled": {
                    "title": "Enabled",
                    "type": "boolean"
                },
                "service": {
                    "$ref": "#/definitions/automation__helm__schema__subschema__kubernetes__Service"
                },
                "nodeSelector": {
                    "$ref": "#/definitions/NodeSelector"
                },
                "affinity": {
                    "$ref": "#/definitions/Affinity"
                },
                "tolerations": {
                    "$ref": "#/definitions/Tolerations"
                },
                "podSecurityContext": {
                    "$ref": "#/definitions/PodSecurityContext"
                },
                "securityContext": {
                    "$ref": "#/definitions/SecurityContext"
                },
                "resources": {
                    "$ref": "#/definitions/Resources"
                },
                "livenessProbe": {
                    "$ref": "#/definitions/LivenessProbe"
                },
                "startupProbe": {
                    "$ref": "#/definitions/StartupProbe"
                },
                "annotations": {
                    "$ref": "#/definitions/Annotations"
                }
            },
            "required": [
                "enabled",
                "service",
                "nodeSelector",
                "affinity",
                "tolerations",
                "podSecurityContext",
                "securityContext",
                "resources",
                "livenessProbe",
                "startupProbe"
            ]
        },
        "IngressPath": {
            "title": "IngressPath",
            "type": "object",
            "properties": {
                "path": {
                    "title": "Path",
                    "type": "string"
                },
                "serviceName": {
                    "title": "Servicename",
                    "type": "string"
                },
                "servicePort": {
                    "title": "Serviceport",
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ]
                }
            },
            "required": [
                "path",
                "serviceName",
                "servicePort"
            ]
        },
        "DagitIngressConfiguration": {
            "title": "DagitIngressConfiguration",
            "type": "object",
            "properties": {
                "host": {
                    "title": "Host",
                    "type": "string"
                },
                "precedingPaths": {
                    "title": "Precedingpaths",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/IngressPath"
                    }
                },
                "succeedingPaths": {
                    "title": "Succeedingpaths",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/IngressPath"
                    }
                }
            },
            "required": [
                "host",
                "precedingPaths",
                "succeedingPaths"
            ]
        },
        "FlowerIngressConfiguration": {
            "title": "FlowerIngressConfiguration",
            "type": "object",
            "properties": {
                "host": {
                    "title": "Host",
                    "type": "string"
                },
                "path": {
                    "title": "Path",
                    "type": "string"
                },
                "precedingPaths": {
                    "title": "Precedingpaths",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/IngressPath"
                    }
                },
                "succeedingPaths": {
                    "title": "Succeedingpaths",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/IngressPath"
                    }
                }
            },
            "required": [
                "host",
                "path",
                "precedingPaths",
                "succeedingPaths"
            ]
        },
        "Ingress": {
            "title": "Ingress",
            "type": "object",
            "properties": {
                "enabled": {
                    "title": "Enabled",
                    "type": "boolean"
                },
                "annotations": {
                    "$ref": "#/definitions/Annotations"
                },
                "dagit": {
                    "$ref": "#/definitions/DagitIngressConfiguration"
                },
                "flower": {
                    "$ref": "#/definitions/FlowerIngressConfiguration"
                }
            },
            "required": [
                "enabled",
                "annotations",
                "dagit",
                "flower"
            ]
        },
        "SecretRef": {
            "title": "SecretRef",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.LocalObjectReference"
        },
        "ComputeLogManagerType": {
            "title": "ComputeLogManagerType",
            "description": "An enumeration.",
            "enum": [
                "AzureBlobComputeLogManager",
                "GCSComputeLogManager",
                "S3ComputeLogManager",
                "CustomComputeLogManager"
            ],
            "type": "string"
        },
        "AzureBlobComputeLogManager": {
            "title": "AzureBlobComputeLogManager",
            "type": "object",
            "properties": {
                "storageAccount": {
                    "title": "Storageaccount",
                    "type": "string"
                },
                "container": {
                    "title": "Container",
                    "type": "string"
                },
                "secretKey": {
                    "title": "Secretkey",
                    "type": "string"
                },
                "localDir": {
                    "title": "Localdir",
                    "type": "string"
                },
                "prefix": {
                    "title": "Prefix",
                    "type": "string"
                }
            },
            "required": [
                "storageAccount",
                "container",
                "secretKey"
            ],
            "additionalProperties": false
        },
        "GCSComputeLogManager": {
            "title": "GCSComputeLogManager",
            "type": "object",
            "properties": {
                "bucket": {
                    "title": "Bucket",
                    "type": "string"
                },
                "localDir": {
                    "title": "Localdir",
                    "type": "string"
                },
                "prefix": {
                    "title": "Prefix",
                    "type": "string"
                }
            },
            "required": [
                "bucket"
            ],
            "additionalProperties": false
        },
        "S3ComputeLogManager": {
            "title": "S3ComputeLogManager",
            "type": "object",
            "properties": {
                "bucket": {
                    "title": "Bucket",
                    "type": "string"
                },
                "localDir": {
                    "title": "Localdir",
                    "type": "string"
                },
                "prefix": {
                    "title": "Prefix",
                    "type": "string"
                },
                "useSsl": {
                    "title": "Usessl",
                    "type": "boolean"
                },
                "verify": {
                    "title": "Verify",
                    "type": "boolean"
                },
                "verifyCertPath": {
                    "title": "Verifycertpath",
                    "type": "string"
                },
                "endpointUrl": {
                    "title": "Endpointurl",
                    "type": "string"
                }
            },
            "required": [
                "bucket"
            ],
            "additionalProperties": false
        },
        "CustomComputeLogManager": {
            "title": "CustomComputeLogManager",
            "type": "object",
            "properties": {
                "module": {
                    "title": "Module",
                    "type": "string"
                },
                "class": {
                    "title": "Class",
                    "type": "string"
                },
                "config": {
                    "title": "Config",
                    "type": "object"
                }
            },
            "required": [
                "module",
                "class",
                "config"
            ],
            "additionalProperties": false
        },
        "ComputeLogManagerConfig": {
            "title": "ComputeLogManagerConfig",
            "type": "object",
            "properties": {
                "azureBlobComputeLogManager": {
                    "$ref": "#/definitions/AzureBlobComputeLogManager"
                },
                "gcsComputeLogManager": {
                    "$ref": "#/definitions/GCSComputeLogManager"
                },
                "s3ComputeLogManager": {
                    "$ref": "#/definitions/S3ComputeLogManager"
                },
                "customComputeLogManager": {
                    "$ref": "#/definitions/CustomComputeLogManager"
                }
            },
            "additionalProperties": false
        },
        "ComputeLogManager": {
            "title": "ComputeLogManager",
            "type": "object",
            "properties": {
                "type": {
                    "$ref": "#/definitions/ComputeLogManagerType"
                },
                "config": {
                    "$ref": "#/definitions/ComputeLogManagerConfig"
                }
            },
            "required": [
                "type",
                "config"
            ],
            "additionalProperties": false,
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "AzureBlobComputeLogManager"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "config": {
                                "required": [
                                    "azureBlobComputeLogManager"
                                ]
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "GCSComputeLogManager"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "config": {
                                "required": [
                                    "gcsComputeLogManager"
                                ]
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "S3ComputeLogManager"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "config": {
                                "required": [
                                    "s3ComputeLogManager"
                                ]
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "CustomComputeLogManager"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "config": {
                                "required": [
                                    "customComputeLogManager"
                                ]
                            }
                        }
                    }
                }
            ]
        },
        "SchedulerType": {
            "title": "SchedulerType",
            "description": "An enumeration.",
            "enum": [
                "DagsterDaemonScheduler",
                "K8sScheduler"
            ],
            "type": "string"
        },
        "SecretEnvSource": {
            "title": "SecretEnvSource",
            "type": "object",
            "properties": {},
            "$ref": "https://kubernetesjsonschema.dev/v1.15.0/_definitions.json#/definitions/io.k8s.api.core.v1.SecretEnvSource"
        },
        "K8sSchedulerConfig": {
            "title": "K8sSchedulerConfig",
            "type": "object",
            "properties": {
                "image": {
                    "$ref": "#/definitions/Image"
                },
                "schedulerNamespace": {
                    "title": "Schedulernamespace",
                    "type": "string"
                },
                "loadInclusterConfig": {
                    "title": "Loadinclusterconfig",
                    "type": "boolean"
                },
                "kubeconfigFile": {
                    "title": "Kubeconfigfile",
                    "type": "string"
                },
                "envSecrets": {
                    "title": "Envsecrets",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/SecretEnvSource"
                    }
                }
            },
            "required": [
                "image",
                "loadInclusterConfig",
                "envSecrets"
            ],
            "additionalProperties": false
        },
        "SchedulerConfig": {
            "title": "SchedulerConfig",
            "type": "object",
            "properties": {
                "K8sScheduler": {
                    "$ref": "#/definitions/K8sSchedulerConfig"
                }
            },
            "additionalProperties": false
        },
        "Scheduler": {
            "title": "Scheduler",
            "type": "object",
            "properties": {
                "type": {
                    "$ref": "#/definitions/SchedulerType"
                },
                "config": {
                    "$ref": "#/definitions/SchedulerConfig"
                }
            },
            "required": [
                "type",
                "config"
            ],
            "additionalProperties": false,
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "K8sScheduler"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "config": {
                                "required": [
                                    "k8sScheduler"
                                ]
                            }
                        }
                    }
                }
            ]
        }
    }
}