{"parents": [{"link": "../../../../", "title": "Module code"}], "title": "dagster.core.definitions.preset", "body": "<h1>Source code for dagster.core.definitions.preset</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">collections</span> <span class=\"kn\">import</span> <span class=\"n\">namedtuple</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">pkg_resources</span>\n<span class=\"kn\">import</span> <span class=\"nn\">six</span>\n<span class=\"kn\">import</span> <span class=\"nn\">yaml</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">check</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.definitions.utils</span> <span class=\"kn\">import</span> <span class=\"n\">config_from_files</span><span class=\"p\">,</span> <span class=\"n\">config_from_yaml_strings</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.errors</span> <span class=\"kn\">import</span> <span class=\"n\">DagsterInvariantViolationError</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.seven</span> <span class=\"kn\">import</span> <span class=\"ne\">FileNotFoundError</span><span class=\"p\">,</span> <span class=\"ne\">ModuleNotFoundError</span>  <span class=\"c1\"># pylint:disable=redefined-builtin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.utils.backcompat</span> <span class=\"kn\">import</span> <span class=\"n\">canonicalize_backcompat_args</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.utils.merger</span> <span class=\"kn\">import</span> <span class=\"n\">deep_merge_dicts</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.mode</span> <span class=\"kn\">import</span> <span class=\"n\">DEFAULT_MODE_NAME</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.utils</span> <span class=\"kn\">import</span> <span class=\"n\">check_valid_name</span>\n\n\n<div class=\"viewcode-block\" id=\"PresetDefinition\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/presets/#dagster.PresetDefinition\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">PresetDefinition</span><span class=\"p\">(</span>\n    <span class=\"n\">namedtuple</span><span class=\"p\">(</span><span class=\"s2\">&quot;_PresetDefinition&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;name run_config solid_selection mode tags&quot;</span><span class=\"p\">)</span>\n<span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Defines a preset configuration in which a pipeline can execute.</span>\n\n<span class=\"sd\">    Presets can be used in Dagit to load predefined configurations into the tool.</span>\n\n<span class=\"sd\">    Presets may also be used from the Python API (in a script, or in test) as follows:</span>\n\n<span class=\"sd\">    .. code-block:: python</span>\n\n<span class=\"sd\">        execute_pipeline(pipeline_def, preset=&#39;example_preset&#39;)</span>\n\n<span class=\"sd\">    Presets may also be used with the command line tools:</span>\n\n<span class=\"sd\">    .. code-block:: shell</span>\n\n<span class=\"sd\">        $ dagster pipeline execute example_pipeline --preset example_preset</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        name (str): The name of this preset. Must be unique in the presets defined on a given</span>\n<span class=\"sd\">            pipeline.</span>\n<span class=\"sd\">        run_config (Optional[dict]): A dict representing the config to set with the preset.</span>\n<span class=\"sd\">            This is equivalent to the ``run_config`` argument to :py:func:`execute_pipeline`.</span>\n<span class=\"sd\">        solid_selection (Optional[List[str]]): A list of solid subselection (including single</span>\n<span class=\"sd\">            solid names) to execute with the preset. e.g. ``[&#39;*some_solid+&#39;, &#39;other_solid&#39;]``</span>\n<span class=\"sd\">        mode (Optional[str]): The mode to apply when executing this preset. (default: &#39;default&#39;)</span>\n<span class=\"sd\">        tags (Optional[Dict[str, Any]]): The tags to apply when executing this preset.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__new__</span><span class=\"p\">(</span>\n        <span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">run_config</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">PresetDefinition</span><span class=\"p\">,</span> <span class=\"bp\">cls</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__new__</span><span class=\"p\">(</span>\n            <span class=\"bp\">cls</span><span class=\"p\">,</span>\n            <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">check_valid_name</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">),</span>\n            <span class=\"n\">run_config</span><span class=\"o\">=</span><span class=\"n\">run_config</span><span class=\"p\">,</span>\n            <span class=\"n\">solid_selection</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_nullable_list_param</span><span class=\"p\">(</span>\n                <span class=\"n\">solid_selection</span><span class=\"p\">,</span> <span class=\"s2\">&quot;solid_selection&quot;</span><span class=\"p\">,</span> <span class=\"n\">of_type</span><span class=\"o\">=</span><span class=\"nb\">str</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_str_param</span><span class=\"p\">(</span><span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">DEFAULT_MODE_NAME</span><span class=\"p\">),</span>\n            <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_dict_param</span><span class=\"p\">(</span><span class=\"n\">tags</span><span class=\"p\">,</span> <span class=\"s2\">&quot;tags&quot;</span><span class=\"p\">,</span> <span class=\"n\">key_type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">),</span>\n        <span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"PresetDefinition.from_files\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/presets/#dagster.PresetDefinition.from_files\">[docs]</a>    <span class=\"nd\">@staticmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">from_files</span><span class=\"p\">(</span>\n        <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">environment_files</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">config_files</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"kc\">None</span>\n    <span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Static constructor for presets from YAML files.</span>\n\n<span class=\"sd\">        Args:</span>\n<span class=\"sd\">            name (str): The name of this preset. Must be unique in the presets defined on a given</span>\n<span class=\"sd\">                pipeline.</span>\n<span class=\"sd\">            config_files (Optional[List[str]]): List of paths or glob patterns for yaml files</span>\n<span class=\"sd\">                to load and parse as the environment config for this preset.</span>\n<span class=\"sd\">            solid_selection (Optional[List[str]]): A list of solid subselection (including single</span>\n<span class=\"sd\">                solid names) to execute with the preset. e.g. ``[&#39;*some_solid+&#39;, &#39;other_solid&#39;]``</span>\n<span class=\"sd\">            mode (Optional[str]): The mode to apply when executing this preset. (default:</span>\n<span class=\"sd\">                &#39;default&#39;)</span>\n<span class=\"sd\">            tags (Optional[Dict[str, Any]]): The tags to apply when executing this preset.</span>\n\n<span class=\"sd\">        Returns:</span>\n<span class=\"sd\">            PresetDefinition: A PresetDefinition constructed from the provided YAML files.</span>\n\n<span class=\"sd\">        Raises:</span>\n<span class=\"sd\">            DagsterInvariantViolationError: When one of the YAML files is invalid and has a parse</span>\n<span class=\"sd\">                error.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">str_param</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;name&quot;</span><span class=\"p\">)</span>\n        <span class=\"n\">config_files</span> <span class=\"o\">=</span> <span class=\"n\">canonicalize_backcompat_args</span><span class=\"p\">(</span>\n            <span class=\"n\">config_files</span><span class=\"p\">,</span> <span class=\"s2\">&quot;config_files&quot;</span><span class=\"p\">,</span> <span class=\"n\">environment_files</span><span class=\"p\">,</span> <span class=\"s2\">&quot;environment_files&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;0.9.0&quot;</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">config_files</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_list_param</span><span class=\"p\">(</span><span class=\"n\">config_files</span><span class=\"p\">,</span> <span class=\"s2\">&quot;config_files&quot;</span><span class=\"p\">)</span>\n        <span class=\"n\">solid_selection</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_nullable_list_param</span><span class=\"p\">(</span>\n            <span class=\"n\">solid_selection</span><span class=\"p\">,</span> <span class=\"s2\">&quot;solid_selection&quot;</span><span class=\"p\">,</span> <span class=\"n\">of_type</span><span class=\"o\">=</span><span class=\"nb\">str</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">mode</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_str_param</span><span class=\"p\">(</span><span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">DEFAULT_MODE_NAME</span><span class=\"p\">)</span>\n\n        <span class=\"n\">merged</span> <span class=\"o\">=</span> <span class=\"n\">config_from_files</span><span class=\"p\">(</span><span class=\"n\">config_files</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">PresetDefinition</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">merged</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"PresetDefinition.from_yaml_strings\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/presets/#dagster.PresetDefinition.from_yaml_strings\">[docs]</a>    <span class=\"nd\">@staticmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">from_yaml_strings</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">yaml_strings</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Static constructor for presets from YAML strings.</span>\n\n<span class=\"sd\">        Args:</span>\n<span class=\"sd\">            name (str): The name of this preset. Must be unique in the presets defined on a given</span>\n<span class=\"sd\">                pipeline.</span>\n<span class=\"sd\">            yaml_strings (Optional[List[str]]): List of yaml strings to parse as the environment</span>\n<span class=\"sd\">                config for this preset.</span>\n<span class=\"sd\">            solid_selection (Optional[List[str]]): A list of solid subselection (including single</span>\n<span class=\"sd\">                solid names) to execute with the preset. e.g. ``[&#39;*some_solid+&#39;, &#39;other_solid&#39;]``</span>\n<span class=\"sd\">            mode (Optional[str]): The mode to apply when executing this preset. (default:</span>\n<span class=\"sd\">                &#39;default&#39;)</span>\n<span class=\"sd\">            tags (Optional[Dict[str, Any]]): The tags to apply when executing this preset.</span>\n\n<span class=\"sd\">        Returns:</span>\n<span class=\"sd\">            PresetDefinition: A PresetDefinition constructed from the provided YAML strings</span>\n\n<span class=\"sd\">        Raises:</span>\n<span class=\"sd\">            DagsterInvariantViolationError: When one of the YAML documents is invalid and has a</span>\n<span class=\"sd\">                parse error.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">str_param</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;name&quot;</span><span class=\"p\">)</span>\n        <span class=\"n\">yaml_strings</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_list_param</span><span class=\"p\">(</span><span class=\"n\">yaml_strings</span><span class=\"p\">,</span> <span class=\"s2\">&quot;yaml_strings&quot;</span><span class=\"p\">,</span> <span class=\"n\">of_type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n        <span class=\"n\">solid_selection</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_nullable_list_param</span><span class=\"p\">(</span>\n            <span class=\"n\">solid_selection</span><span class=\"p\">,</span> <span class=\"s2\">&quot;solid_selection&quot;</span><span class=\"p\">,</span> <span class=\"n\">of_type</span><span class=\"o\">=</span><span class=\"nb\">str</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">mode</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_str_param</span><span class=\"p\">(</span><span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">DEFAULT_MODE_NAME</span><span class=\"p\">)</span>\n\n        <span class=\"n\">merged</span> <span class=\"o\">=</span> <span class=\"n\">config_from_yaml_strings</span><span class=\"p\">(</span><span class=\"n\">yaml_strings</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">PresetDefinition</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">merged</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"PresetDefinition.from_pkg_resources\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/presets/#dagster.PresetDefinition.from_pkg_resources\">[docs]</a>    <span class=\"nd\">@staticmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">from_pkg_resources</span><span class=\"p\">(</span>\n        <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">pkg_resource_defs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"kc\">None</span>\n    <span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Load a preset from a package resource, using :py:func:`pkg_resources.resource_string`.</span>\n\n<span class=\"sd\">        Example:</span>\n\n<span class=\"sd\">        .. code-block:: python</span>\n\n<span class=\"sd\">            PresetDefinition.from_pkg_resources(</span>\n<span class=\"sd\">                name=&#39;local&#39;,</span>\n<span class=\"sd\">                mode=&#39;local&#39;,</span>\n<span class=\"sd\">                pkg_resource_defs=[</span>\n<span class=\"sd\">                    (&#39;dagster_examples.airline_demo.environments&#39;, &#39;local_base.yaml&#39;),</span>\n<span class=\"sd\">                    (&#39;dagster_examples.airline_demo.environments&#39;, &#39;local_warehouse.yaml&#39;),</span>\n<span class=\"sd\">                ],</span>\n<span class=\"sd\">            )</span>\n\n\n<span class=\"sd\">        Args:</span>\n<span class=\"sd\">            name (str): The name of this preset. Must be unique in the presets defined on a given</span>\n<span class=\"sd\">                pipeline.</span>\n<span class=\"sd\">            pkg_resource_defs (Optional[List[(str, str)]]): List of pkg_resource modules/files to</span>\n<span class=\"sd\">                load as environment config for this preset.</span>\n<span class=\"sd\">            solid_selection (Optional[List[str]]): A list of solid subselection (including single</span>\n<span class=\"sd\">                solid names) to execute with this partition. e.g.</span>\n<span class=\"sd\">                ``[&#39;*some_solid+&#39;, &#39;other_solid&#39;]``</span>\n<span class=\"sd\">            mode (Optional[str]): The mode to apply when executing this preset. (default:</span>\n<span class=\"sd\">                &#39;default&#39;)</span>\n<span class=\"sd\">            tags (Optional[Dict[str, Any]]): The tags to apply when executing this preset.</span>\n\n<span class=\"sd\">        Returns:</span>\n<span class=\"sd\">            PresetDefinition: A PresetDefinition constructed from the provided YAML strings</span>\n\n<span class=\"sd\">        Raises:</span>\n<span class=\"sd\">            DagsterInvariantViolationError: When one of the YAML documents is invalid and has a</span>\n<span class=\"sd\">                parse error.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">pkg_resource_defs</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_list_param</span><span class=\"p\">(</span>\n            <span class=\"n\">pkg_resource_defs</span><span class=\"p\">,</span> <span class=\"s2\">&quot;pkg_resource_defs&quot;</span><span class=\"p\">,</span> <span class=\"n\">of_type</span><span class=\"o\">=</span><span class=\"nb\">tuple</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"n\">yaml_strings</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n                <span class=\"n\">six</span><span class=\"o\">.</span><span class=\"n\">ensure_str</span><span class=\"p\">(</span><span class=\"n\">pkg_resources</span><span class=\"o\">.</span><span class=\"n\">resource_string</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">pkg_resource_def</span><span class=\"p\">))</span>\n                <span class=\"k\">for</span> <span class=\"n\">pkg_resource_def</span> <span class=\"ow\">in</span> <span class=\"n\">pkg_resource_defs</span>\n            <span class=\"p\">]</span>\n        <span class=\"k\">except</span> <span class=\"p\">(</span><span class=\"ne\">ModuleNotFoundError</span><span class=\"p\">,</span> <span class=\"ne\">FileNotFoundError</span><span class=\"p\">,</span> <span class=\"ne\">UnicodeDecodeError</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">err</span><span class=\"p\">:</span>\n            <span class=\"n\">six</span><span class=\"o\">.</span><span class=\"n\">raise_from</span><span class=\"p\">(</span>\n                <span class=\"n\">DagsterInvariantViolationError</span><span class=\"p\">(</span>\n                    <span class=\"s2\">&quot;Encountered error attempting to parse yaml. Loading YAMLs from &quot;</span>\n                    <span class=\"s2\">&quot;package resources </span><span class=\"si\">{pkg_resource_defs}</span><span class=\"s2\"> &quot;</span>\n                    <span class=\"s1\">&#39;on preset &quot;</span><span class=\"si\">{name}</span><span class=\"s1\">&quot;.&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">pkg_resource_defs</span><span class=\"o\">=</span><span class=\"n\">pkg_resource_defs</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">name</span><span class=\"p\">)</span>\n                <span class=\"p\">),</span>\n                <span class=\"n\">err</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">PresetDefinition</span><span class=\"o\">.</span><span class=\"n\">from_yaml_strings</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">yaml_strings</span><span class=\"p\">,</span> <span class=\"n\">solid_selection</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"PresetDefinition.get_environment_yaml\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/presets/#dagster.PresetDefinition.get_environment_yaml\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">get_environment_yaml</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Get the environment dict set on a preset as YAML.</span>\n\n<span class=\"sd\">        Returns:</span>\n<span class=\"sd\">            str: The environment dict as YAML.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"n\">yaml</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">run_config</span> <span class=\"ow\">or</span> <span class=\"p\">{},</span> <span class=\"n\">default_flow_style</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"PresetDefinition.with_additional_config\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/presets/#dagster.PresetDefinition.with_additional_config\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">with_additional_config</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">run_config</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Return a new PresetDefinition with additional config merged in to the existing config.&quot;&quot;&quot;</span>\n\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_nullable_dict_param</span><span class=\"p\">(</span><span class=\"n\">run_config</span><span class=\"p\">,</span> <span class=\"s2\">&quot;run_config&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">run_config</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"n\">PresetDefinition</span><span class=\"p\">(</span>\n                <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span>\n                <span class=\"n\">solid_selection</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">solid_selection</span><span class=\"p\">,</span>\n                <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">mode</span><span class=\"p\">,</span>\n                <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">tags</span><span class=\"p\">,</span>\n                <span class=\"n\">run_config</span><span class=\"o\">=</span><span class=\"n\">deep_merge_dicts</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">run_config</span><span class=\"p\">,</span> <span class=\"n\">run_config</span><span class=\"p\">),</span>\n            <span class=\"p\">)</span></div></div>\n</pre></div>", "current_page_name": "_modules/dagster/core/definitions/preset", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}