{"parents": [{"link": "../../../../", "title": "Module code"}], "title": "dagster.core.definitions.logger", "body": "<h1>Source code for dagster.core.definitions.logger</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">check</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.config.field_utils</span> <span class=\"kn\">import</span> <span class=\"n\">check_user_facing_opt_config_param</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.definitions.config</span> <span class=\"kn\">import</span> <span class=\"n\">is_callable_valid_config_arg</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.definitions.config_mappable</span> <span class=\"kn\">import</span> <span class=\"n\">ConfiguredMixin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.utils.backcompat</span> <span class=\"kn\">import</span> <span class=\"n\">rename_warning</span>\n\n\n<div class=\"viewcode-block\" id=\"LoggerDefinition\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/loggers/#dagster_aws.cloudwatch.LoggerDefinition\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">LoggerDefinition</span><span class=\"p\">(</span><span class=\"n\">ConfiguredMixin</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Core class for defining loggers.</span>\n\n<span class=\"sd\">    Loggers are pipeline-scoped logging handlers, which will be automatically invoked whenever</span>\n<span class=\"sd\">    solids in a pipeline log messages.</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        logger_fn (Callable[[InitLoggerContext], logging.Logger]): User-provided function to</span>\n<span class=\"sd\">            instantiate the logger. This logger will be automatically invoked whenever the methods</span>\n<span class=\"sd\">            on ``context.log`` are called from within solid compute logic.</span>\n<span class=\"sd\">        config_schema (Optional[ConfigSchema]): The schema for the config. Configuration data available in</span>\n<span class=\"sd\">            `init_context.logger_config`.</span>\n<span class=\"sd\">        description (Optional[str]): A human-readable description of this logger.</span>\n<span class=\"sd\">        _configured_config_mapping_fn: This argument is for internal use only. Users should not</span>\n<span class=\"sd\">            specify this field. To preconfigure a resource, use the :py:func:`configured` API.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span>\n        <span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">logger_fn</span><span class=\"p\">,</span> <span class=\"n\">config_schema</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">_configured_config_mapping_fn</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_logger_fn</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">callable_param</span><span class=\"p\">(</span><span class=\"n\">logger_fn</span><span class=\"p\">,</span> <span class=\"s2\">&quot;logger_fn&quot;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_config_schema</span> <span class=\"o\">=</span> <span class=\"n\">check_user_facing_opt_config_param</span><span class=\"p\">(</span><span class=\"n\">config_schema</span><span class=\"p\">,</span> <span class=\"s2\">&quot;config_schema&quot;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_description</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_str_param</span><span class=\"p\">(</span><span class=\"n\">description</span><span class=\"p\">,</span> <span class=\"s2\">&quot;description&quot;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__configured_config_mapping_fn</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_callable_param</span><span class=\"p\">(</span>\n            <span class=\"n\">_configured_config_mapping_fn</span><span class=\"p\">,</span> <span class=\"s2\">&quot;config_mapping_fn&quot;</span>\n        <span class=\"p\">)</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">LoggerDefinition</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">_configured_config_mapping_fn</span><span class=\"p\">,</span> <span class=\"n\">is_nameless</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">logger_fn</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_logger_fn</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">config_field</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">rename_warning</span><span class=\"p\">(</span><span class=\"s2\">&quot;config_schema&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;config_field&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;0.9.0&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_config_schema</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">config_schema</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_config_schema</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">description</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_description</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">copy_for_configured</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"p\">,</span> <span class=\"n\">wrapped_config_mapping_fn</span><span class=\"p\">,</span> <span class=\"n\">config_schema</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">invariant</span><span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"s2\">&quot;LoggerDefinitions do not have names&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">LoggerDefinition</span><span class=\"p\">(</span>\n            <span class=\"n\">config_schema</span><span class=\"o\">=</span><span class=\"n\">config_schema</span><span class=\"p\">,</span>\n            <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"n\">description</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">description</span><span class=\"p\">,</span>\n            <span class=\"n\">logger_fn</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">logger_fn</span><span class=\"p\">,</span>\n            <span class=\"n\">_configured_config_mapping_fn</span><span class=\"o\">=</span><span class=\"n\">wrapped_config_mapping_fn</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"logger\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/loggers/#dagster_aws.cloudwatch.logger\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">logger</span><span class=\"p\">(</span><span class=\"n\">config_schema</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Define a logger.</span>\n\n<span class=\"sd\">    The decorated function should accept an :py:class:`InitLoggerContext` and return an instance of</span>\n<span class=\"sd\">    :py:class:`python:logging.Logger`. This function will become the ``logger_fn`` of an underlying</span>\n<span class=\"sd\">    :py:class:`LoggerDefinition`.</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        config_schema (Optional[ConfigSchema]): The schema for the config. Configuration data available in</span>\n<span class=\"sd\">            `init_context.logger_config`.</span>\n<span class=\"sd\">        description (Optional[str]): A human-readable description of the logger.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"c1\"># This case is for when decorator is used bare, without arguments.</span>\n    <span class=\"c1\"># E.g. @logger versus @logger()</span>\n    <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"n\">config_schema</span><span class=\"p\">)</span> <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"n\">is_callable_valid_config_arg</span><span class=\"p\">(</span><span class=\"n\">config_schema</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">LoggerDefinition</span><span class=\"p\">(</span><span class=\"n\">logger_fn</span><span class=\"o\">=</span><span class=\"n\">config_schema</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">_wrap</span><span class=\"p\">(</span><span class=\"n\">logger_fn</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">LoggerDefinition</span><span class=\"p\">(</span>\n            <span class=\"n\">logger_fn</span><span class=\"o\">=</span><span class=\"n\">logger_fn</span><span class=\"p\">,</span> <span class=\"n\">config_schema</span><span class=\"o\">=</span><span class=\"n\">config_schema</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"n\">description</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">_wrap</span></div>\n</pre></div>", "current_page_name": "_modules/dagster/core/definitions/logger", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}