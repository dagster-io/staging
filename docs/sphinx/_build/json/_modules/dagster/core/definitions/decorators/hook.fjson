{"parents": [{"link": "../../../../../", "title": "Module code"}], "title": "dagster.core.definitions.decorators.hook", "body": "<h1>Source code for dagster.core.definitions.decorators.hook</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">functools</span> <span class=\"kn\">import</span> <span class=\"n\">update_wrapper</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">check</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.errors</span> <span class=\"kn\">import</span> <span class=\"n\">DagsterInvalidDefinitionError</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">...decorator_utils</span> <span class=\"kn\">import</span> <span class=\"n\">split_function_parameters</span><span class=\"p\">,</span> <span class=\"n\">validate_decorated_fn_positionals</span>\n<span class=\"kn\">from</span> <span class=\"nn\">..events</span> <span class=\"kn\">import</span> <span class=\"n\">HookExecutionResult</span>\n<span class=\"kn\">from</span> <span class=\"nn\">..hook</span> <span class=\"kn\">import</span> <span class=\"n\">HookDefinition</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">_Hook</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_str_param</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;name&quot;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">required_resource_keys</span> <span class=\"o\">=</span> <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_set_param</span><span class=\"p\">(</span>\n            <span class=\"n\">required_resource_keys</span><span class=\"p\">,</span> <span class=\"s2\">&quot;required_resource_keys&quot;</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">fn</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">callable_param</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fn&quot;</span><span class=\"p\">)</span>\n\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">fn</span><span class=\"o\">.</span><span class=\"vm\">__name__</span>\n\n        <span class=\"n\">expected_positionals</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;context&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;event_list&quot;</span><span class=\"p\">]</span>\n        <span class=\"n\">fn_positionals</span><span class=\"p\">,</span> <span class=\"n\">_</span> <span class=\"o\">=</span> <span class=\"n\">split_function_parameters</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"n\">expected_positionals</span><span class=\"p\">)</span>\n        <span class=\"n\">missing_positional</span> <span class=\"o\">=</span> <span class=\"n\">validate_decorated_fn_positionals</span><span class=\"p\">(</span><span class=\"n\">fn_positionals</span><span class=\"p\">,</span> <span class=\"n\">expected_positionals</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">missing_positional</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">DagsterInvalidDefinitionError</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;&#39;</span><span class=\"si\">{hook_name}</span><span class=\"s2\">&#39; decorated function does not have required positional &quot;</span>\n                <span class=\"s2\">&quot;parameter &#39;</span><span class=\"si\">{missing_param}</span><span class=\"s2\">&#39;. Hook functions should only have keyword arguments &quot;</span>\n                <span class=\"s2\">&quot;that match input names and a first positional parameter named &#39;context&#39; and &quot;</span>\n                <span class=\"s2\">&quot;a second positional parameter named &#39;event_list&#39;.&quot;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span>\n                    <span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">fn</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"n\">missing_param</span><span class=\"o\">=</span><span class=\"n\">missing_positional</span>\n                <span class=\"p\">)</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"n\">hook_def</span> <span class=\"o\">=</span> <span class=\"n\">HookDefinition</span><span class=\"p\">(</span>\n            <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">hook_fn</span><span class=\"o\">=</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">required_resource_keys</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">update_wrapper</span><span class=\"p\">(</span><span class=\"n\">hook_def</span><span class=\"p\">,</span> <span class=\"n\">fn</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">hook_def</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">event_list_hook</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Create a generic hook with the specified parameters from the decorated function.</span>\n\n<span class=\"sd\">    This decorator is currently used internally by Dagster machinery to support success_hook and</span>\n<span class=\"sd\">    failure_hook.</span>\n\n<span class=\"sd\">    The user-defined hook function requires two parameters:</span>\n<span class=\"sd\">    - A `context` object is passed as the first parameter. The context is an instance of</span>\n<span class=\"sd\">        :py:class:`context &lt;HookContext&gt;`, and provides access to system</span>\n<span class=\"sd\">        information, such as loggers (context.log), resources (context.resources), the solid</span>\n<span class=\"sd\">        (context.solid) and its execution step (context.step) which triggers this hook.</span>\n<span class=\"sd\">    - An `event_list` object is passed as the second paramter. It provides the full event list of the</span>\n<span class=\"sd\">        associated execution step.</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        name (Optional[str]): The name of this hook.</span>\n<span class=\"sd\">        required_resource_keys (Optional[Set[str]]): Keys for the resources required by the</span>\n<span class=\"sd\">            hook.</span>\n\n<span class=\"sd\">    Examples:</span>\n\n<span class=\"sd\">        .. code-block:: python</span>\n\n<span class=\"sd\">            @event_list_hook(required_resource_keys={&#39;slack&#39;})</span>\n<span class=\"sd\">            def slack_on_materializations(context, event_list):</span>\n<span class=\"sd\">                for event in event_list:</span>\n<span class=\"sd\">                    if event.event_type == DagsterEventType.STEP_MATERIALIZATION:</span>\n<span class=\"sd\">                        message = &#39;{solid} has materialized an asset {key}.&#39;.format(</span>\n<span class=\"sd\">                            solid=context.solid.name,</span>\n<span class=\"sd\">                            key=event.asset_key</span>\n<span class=\"sd\">                        )</span>\n<span class=\"sd\">                        # send a slack message every time a materialization event occurs</span>\n<span class=\"sd\">                        context.resources.slack.send_message(message)</span>\n\n\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"c1\"># This case is for when decorator is used bare, without arguments.</span>\n    <span class=\"c1\"># e.g. @event_list_hook versus @event_list_hook()</span>\n    <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">invariant</span><span class=\"p\">(</span><span class=\"n\">required_resource_keys</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">_Hook</span><span class=\"p\">()(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">_Hook</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"n\">required_resource_keys</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"success_hook\"><a class=\"viewcode-back\" href=\"../../../../../../sections/api/apidocs/hooks/#dagster.success_hook\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">success_hook</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Create a hook on step success events with the specified parameters from the decorated function.</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        name (Optional[str]): The name of this hook.</span>\n<span class=\"sd\">        required_resource_keys (Optional[Set[str]]): Keys for the resources required by the</span>\n<span class=\"sd\">            hook.</span>\n\n<span class=\"sd\">    Examples:</span>\n\n<span class=\"sd\">        .. code-block:: python</span>\n\n<span class=\"sd\">            @success_hook(required_resource_keys={&#39;slack&#39;})</span>\n<span class=\"sd\">            def slack_on_success(context):</span>\n<span class=\"sd\">                message = &#39;solid {} succeeded&#39;.format(context.solid.name)</span>\n<span class=\"sd\">                context.resources.slack.send_message(message)</span>\n\n<span class=\"sd\">            @success_hook</span>\n<span class=\"sd\">            def do_something_on_success(context):</span>\n<span class=\"sd\">                do_something()</span>\n\n\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">wrapper</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">callable_param</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fn&quot;</span><span class=\"p\">)</span>\n\n        <span class=\"n\">expected_positionals</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;context&quot;</span><span class=\"p\">]</span>\n        <span class=\"n\">fn_positionals</span><span class=\"p\">,</span> <span class=\"n\">_</span> <span class=\"o\">=</span> <span class=\"n\">split_function_parameters</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"n\">expected_positionals</span><span class=\"p\">)</span>\n        <span class=\"n\">missing_positional</span> <span class=\"o\">=</span> <span class=\"n\">validate_decorated_fn_positionals</span><span class=\"p\">(</span><span class=\"n\">fn_positionals</span><span class=\"p\">,</span> <span class=\"n\">expected_positionals</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">missing_positional</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">DagsterInvalidDefinitionError</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;@success_hook &#39;</span><span class=\"si\">{hook_name}</span><span class=\"s2\">&#39; decorated function does not have required positional &quot;</span>\n                <span class=\"s2\">&quot;parameter &#39;</span><span class=\"si\">{missing_param}</span><span class=\"s2\">&#39;. Hook functions should only have keyword arguments &quot;</span>\n                <span class=\"s2\">&quot;that match input names and a first positional parameter named &#39;context&#39;.&quot;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span>\n                    <span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">fn</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"n\">missing_param</span><span class=\"o\">=</span><span class=\"n\">missing_positional</span>\n                <span class=\"p\">)</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">name</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span> <span class=\"ow\">or</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">):</span>\n            <span class=\"n\">_name</span> <span class=\"o\">=</span> <span class=\"n\">fn</span><span class=\"o\">.</span><span class=\"vm\">__name__</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">_name</span> <span class=\"o\">=</span> <span class=\"n\">name</span>\n\n        <span class=\"nd\">@event_list_hook</span><span class=\"p\">(</span><span class=\"n\">_name</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"p\">)</span>\n        <span class=\"k\">def</span> <span class=\"nf\">_success_hook</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">event_list</span><span class=\"p\">):</span>\n            <span class=\"k\">for</span> <span class=\"n\">event</span> <span class=\"ow\">in</span> <span class=\"n\">event_list</span><span class=\"p\">:</span>\n                <span class=\"k\">if</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">is_step_success</span><span class=\"p\">:</span>\n                    <span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">)</span>\n                    <span class=\"k\">return</span> <span class=\"n\">HookExecutionResult</span><span class=\"p\">(</span><span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">_name</span><span class=\"p\">,</span> <span class=\"n\">is_skipped</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># hook is skipped when fn didn&#39;t run</span>\n            <span class=\"k\">return</span> <span class=\"n\">HookExecutionResult</span><span class=\"p\">(</span><span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">_name</span><span class=\"p\">,</span> <span class=\"n\">is_skipped</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">_success_hook</span>\n\n    <span class=\"c1\"># This case is for when decorator is used bare, without arguments, i.e. @success_hook</span>\n    <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">invariant</span><span class=\"p\">(</span><span class=\"n\">required_resource_keys</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">wrapper</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">wrapper</span></div>\n\n\n<div class=\"viewcode-block\" id=\"failure_hook\"><a class=\"viewcode-back\" href=\"../../../../../../sections/api/apidocs/hooks/#dagster.failure_hook\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">failure_hook</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Create a hook on step failure events with the specified parameters from the decorated function.</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        name (Optional[str]): The name of this hook.</span>\n<span class=\"sd\">        required_resource_keys (Optional[Set[str]]): Keys for the resources required by the</span>\n<span class=\"sd\">            hook.</span>\n\n<span class=\"sd\">    Examples:</span>\n\n<span class=\"sd\">        .. code-block:: python</span>\n\n<span class=\"sd\">            @failure_hook(required_resource_keys={&#39;slack&#39;})</span>\n<span class=\"sd\">            def slack_on_failure(context):</span>\n<span class=\"sd\">                message = &#39;solid {} failed&#39;.format(context.solid.name)</span>\n<span class=\"sd\">                context.resources.slack.send_message(message)</span>\n\n<span class=\"sd\">            @failure_hook</span>\n<span class=\"sd\">            def do_something_on_failure(context):</span>\n<span class=\"sd\">                do_something()</span>\n\n\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">wrapper</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">callable_param</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fn&quot;</span><span class=\"p\">)</span>\n\n        <span class=\"n\">expected_positionals</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;context&quot;</span><span class=\"p\">]</span>\n        <span class=\"n\">fn_positionals</span><span class=\"p\">,</span> <span class=\"n\">_</span> <span class=\"o\">=</span> <span class=\"n\">split_function_parameters</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"n\">expected_positionals</span><span class=\"p\">)</span>\n        <span class=\"n\">missing_positional</span> <span class=\"o\">=</span> <span class=\"n\">validate_decorated_fn_positionals</span><span class=\"p\">(</span><span class=\"n\">fn_positionals</span><span class=\"p\">,</span> <span class=\"n\">expected_positionals</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">missing_positional</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">DagsterInvalidDefinitionError</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;@failure_hook &#39;</span><span class=\"si\">{hook_name}</span><span class=\"s2\">&#39; decorated function does not have required positional &quot;</span>\n                <span class=\"s2\">&quot;parameter &#39;</span><span class=\"si\">{missing_param}</span><span class=\"s2\">&#39;. Hook functions should only have keyword arguments &quot;</span>\n                <span class=\"s2\">&quot;that match input names and a first positional parameter named &#39;context&#39;.&quot;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span>\n                    <span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">fn</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"n\">missing_param</span><span class=\"o\">=</span><span class=\"n\">missing_positional</span>\n                <span class=\"p\">)</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">name</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span> <span class=\"ow\">or</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">):</span>\n            <span class=\"n\">_name</span> <span class=\"o\">=</span> <span class=\"n\">fn</span><span class=\"o\">.</span><span class=\"vm\">__name__</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">_name</span> <span class=\"o\">=</span> <span class=\"n\">name</span>\n\n        <span class=\"nd\">@event_list_hook</span><span class=\"p\">(</span><span class=\"n\">_name</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"p\">)</span>\n        <span class=\"k\">def</span> <span class=\"nf\">_failure_hook</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">event_list</span><span class=\"p\">):</span>\n            <span class=\"k\">for</span> <span class=\"n\">event</span> <span class=\"ow\">in</span> <span class=\"n\">event_list</span><span class=\"p\">:</span>\n                <span class=\"k\">if</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">is_step_failure</span><span class=\"p\">:</span>\n                    <span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">)</span>\n                    <span class=\"k\">return</span> <span class=\"n\">HookExecutionResult</span><span class=\"p\">(</span><span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">_name</span><span class=\"p\">,</span> <span class=\"n\">is_skipped</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># hook is skipped when fn didn&#39;t run</span>\n            <span class=\"k\">return</span> <span class=\"n\">HookExecutionResult</span><span class=\"p\">(</span><span class=\"n\">hook_name</span><span class=\"o\">=</span><span class=\"n\">_name</span><span class=\"p\">,</span> <span class=\"n\">is_skipped</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">_failure_hook</span>\n\n    <span class=\"c1\"># This case is for when decorator is used bare, without arguments, i.e. @failure_hook</span>\n    <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">invariant</span><span class=\"p\">(</span><span class=\"n\">required_resource_keys</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">wrapper</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">wrapper</span></div>\n</pre></div>", "current_page_name": "_modules/dagster/core/definitions/decorators/hook", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}