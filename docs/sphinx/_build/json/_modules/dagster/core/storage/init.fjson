{"parents": [{"link": "../../../../", "title": "Module code"}], "title": "dagster.core.storage.init", "body": "<h1>Source code for dagster.core.storage.init</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">collections</span> <span class=\"kn\">import</span> <span class=\"n\">namedtuple</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">check</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.definitions</span> <span class=\"kn\">import</span> <span class=\"p\">(</span>\n    <span class=\"n\">IntermediateStorageDefinition</span><span class=\"p\">,</span>\n    <span class=\"n\">ModeDefinition</span><span class=\"p\">,</span>\n    <span class=\"n\">PipelineDefinition</span><span class=\"p\">,</span>\n    <span class=\"n\">SystemStorageDefinition</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.instance</span> <span class=\"kn\">import</span> <span class=\"n\">DagsterInstance</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.storage.pipeline_run</span> <span class=\"kn\">import</span> <span class=\"n\">PipelineRun</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.storage.type_storage</span> <span class=\"kn\">import</span> <span class=\"n\">TypeStoragePluginRegistry</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster.core.system_config.objects</span> <span class=\"kn\">import</span> <span class=\"n\">EnvironmentConfig</span>\n\n\n<div class=\"viewcode-block\" id=\"InitSystemStorageContext\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/internals/#dagster.InitSystemStorageContext\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">InitSystemStorageContext</span><span class=\"p\">(</span>\n    <span class=\"n\">namedtuple</span><span class=\"p\">(</span>\n        <span class=\"s2\">&quot;InitSystemStorageContext&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">(</span>\n            <span class=\"s2\">&quot;pipeline_def mode_def system_storage_def pipeline_run instance environment_config &quot;</span>\n            <span class=\"s2\">&quot;type_storage_plugin_registry resources system_storage_config&quot;</span>\n        <span class=\"p\">),</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;System storage-specific initialization context.</span>\n\n<span class=\"sd\">    Attributes:</span>\n<span class=\"sd\">        pipeline_def (PipelineDefinition): The definition of the pipeline in context.</span>\n<span class=\"sd\">        mode_def (ModeDefinition): The definition of the mode in contxt.</span>\n<span class=\"sd\">        system_storage_def (SystemStorageDefinition): The definition of the system storage to be</span>\n<span class=\"sd\">            constructed.</span>\n<span class=\"sd\">        pipeline_run (PipelineRun): The pipeline run in context.</span>\n<span class=\"sd\">        instance (DagsterInstance): The instance.</span>\n<span class=\"sd\">        environment_config (EnvironmentConfig): The environment config.</span>\n<span class=\"sd\">        type_storage_plugin_registry (TypeStoragePluginRegistry): Registry containing custom type</span>\n<span class=\"sd\">            storage plugins.</span>\n<span class=\"sd\">        resources (Any): Resources available in context.</span>\n<span class=\"sd\">        system_storage_config (Dict[str, Any]): The system storage-specific configuration data</span>\n<span class=\"sd\">            provided by the environment config. The schema for this data is defined by the</span>\n<span class=\"sd\">            ``config_field`` argument to :py:class:`SystemStorageDefinition`.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__new__</span><span class=\"p\">(</span>\n        <span class=\"bp\">cls</span><span class=\"p\">,</span>\n        <span class=\"n\">pipeline_def</span><span class=\"p\">,</span>\n        <span class=\"n\">mode_def</span><span class=\"p\">,</span>\n        <span class=\"n\">system_storage_def</span><span class=\"p\">,</span>\n        <span class=\"n\">pipeline_run</span><span class=\"p\">,</span>\n        <span class=\"n\">instance</span><span class=\"p\">,</span>\n        <span class=\"n\">environment_config</span><span class=\"p\">,</span>\n        <span class=\"n\">type_storage_plugin_registry</span><span class=\"p\">,</span>\n        <span class=\"n\">resources</span><span class=\"p\">,</span>\n        <span class=\"n\">system_storage_config</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">InitSystemStorageContext</span><span class=\"p\">,</span> <span class=\"bp\">cls</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__new__</span><span class=\"p\">(</span>\n            <span class=\"bp\">cls</span><span class=\"p\">,</span>\n            <span class=\"n\">pipeline_def</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">pipeline_def</span><span class=\"p\">,</span> <span class=\"s2\">&quot;pipeline_def&quot;</span><span class=\"p\">,</span> <span class=\"n\">PipelineDefinition</span><span class=\"p\">),</span>\n            <span class=\"n\">mode_def</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">mode_def</span><span class=\"p\">,</span> <span class=\"s2\">&quot;mode_def&quot;</span><span class=\"p\">,</span> <span class=\"n\">ModeDefinition</span><span class=\"p\">),</span>\n            <span class=\"n\">system_storage_def</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span>\n                <span class=\"n\">system_storage_def</span><span class=\"p\">,</span> <span class=\"s2\">&quot;system_storage_def&quot;</span><span class=\"p\">,</span> <span class=\"n\">SystemStorageDefinition</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">pipeline_run</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">pipeline_run</span><span class=\"p\">,</span> <span class=\"s2\">&quot;pipeline_run&quot;</span><span class=\"p\">,</span> <span class=\"n\">PipelineRun</span><span class=\"p\">),</span>\n            <span class=\"n\">instance</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">instance</span><span class=\"p\">,</span> <span class=\"s2\">&quot;instance&quot;</span><span class=\"p\">,</span> <span class=\"n\">DagsterInstance</span><span class=\"p\">),</span>\n            <span class=\"n\">environment_config</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span>\n                <span class=\"n\">environment_config</span><span class=\"p\">,</span> <span class=\"s2\">&quot;environment_config&quot;</span><span class=\"p\">,</span> <span class=\"n\">EnvironmentConfig</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">type_storage_plugin_registry</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span>\n                <span class=\"n\">type_storage_plugin_registry</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;type_storage_plugin_registry&quot;</span><span class=\"p\">,</span>\n                <span class=\"n\">TypeStoragePluginRegistry</span><span class=\"p\">,</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">resources</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">not_none_param</span><span class=\"p\">(</span><span class=\"n\">resources</span><span class=\"p\">,</span> <span class=\"s2\">&quot;resources&quot;</span><span class=\"p\">),</span>\n            <span class=\"n\">system_storage_config</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">dict_param</span><span class=\"p\">(</span>\n                <span class=\"n\">system_storage_config</span><span class=\"p\">,</span> <span class=\"n\">system_storage_config</span><span class=\"p\">,</span> <span class=\"n\">key_type</span><span class=\"o\">=</span><span class=\"nb\">str</span>\n            <span class=\"p\">),</span>\n        <span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"InitIntermediateStorageContext\"><a class=\"viewcode-back\" href=\"../../../../../sections/api/apidocs/internals/#dagster.InitIntermediateStorageContext\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">InitIntermediateStorageContext</span><span class=\"p\">(</span>\n    <span class=\"n\">namedtuple</span><span class=\"p\">(</span>\n        <span class=\"s2\">&quot;InitIntermediateStorageContext&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">(</span>\n            <span class=\"s2\">&quot;pipeline_def mode_def intermediate_storage_def pipeline_run instance environment_config &quot;</span>\n            <span class=\"s2\">&quot;type_storage_plugin_registry resources intermediate_storage_config&quot;</span>\n        <span class=\"p\">),</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;Intermediate storage-specific initialization context.</span>\n\n<span class=\"sd\">    Attributes:</span>\n<span class=\"sd\">        pipeline_def (PipelineDefinition): The definition of the pipeline in context.</span>\n<span class=\"sd\">        mode_def (ModeDefinition): The definition of the mode in contxt.</span>\n<span class=\"sd\">        intermediate_storage_def (IntermediateStorageDefinition): The definition of the intermediate storage to be</span>\n<span class=\"sd\">            constructed.</span>\n<span class=\"sd\">        pipeline_run (PipelineRun): The pipeline run in context.</span>\n<span class=\"sd\">        instance (DagsterInstance): The instance.</span>\n<span class=\"sd\">        environment_config (EnvironmentConfig): The environment config.</span>\n<span class=\"sd\">        type_storage_plugin_registry (TypeStoragePluginRegistry): Registry containing custom type</span>\n<span class=\"sd\">            storage plugins.</span>\n<span class=\"sd\">        resources (Any): Resources available in context.</span>\n<span class=\"sd\">        intermediate_storage_config (Dict[str, Any]): The intermediate storage-specific configuration data</span>\n<span class=\"sd\">            provided by the environment config. The schema for this data is defined by the</span>\n<span class=\"sd\">            ``config_field`` argument to :py:class:`IntermediateStorageDefinition`.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__new__</span><span class=\"p\">(</span>\n        <span class=\"bp\">cls</span><span class=\"p\">,</span>\n        <span class=\"n\">pipeline_def</span><span class=\"p\">,</span>\n        <span class=\"n\">mode_def</span><span class=\"p\">,</span>\n        <span class=\"n\">intermediate_storage_def</span><span class=\"p\">,</span>\n        <span class=\"n\">pipeline_run</span><span class=\"p\">,</span>\n        <span class=\"n\">instance</span><span class=\"p\">,</span>\n        <span class=\"n\">environment_config</span><span class=\"p\">,</span>\n        <span class=\"n\">type_storage_plugin_registry</span><span class=\"p\">,</span>\n        <span class=\"n\">resources</span><span class=\"p\">,</span>\n        <span class=\"n\">intermediate_storage_config</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">InitIntermediateStorageContext</span><span class=\"p\">,</span> <span class=\"bp\">cls</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__new__</span><span class=\"p\">(</span>\n            <span class=\"bp\">cls</span><span class=\"p\">,</span>\n            <span class=\"n\">pipeline_def</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">pipeline_def</span><span class=\"p\">,</span> <span class=\"s2\">&quot;pipeline_def&quot;</span><span class=\"p\">,</span> <span class=\"n\">PipelineDefinition</span><span class=\"p\">),</span>\n            <span class=\"n\">mode_def</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">mode_def</span><span class=\"p\">,</span> <span class=\"s2\">&quot;mode_def&quot;</span><span class=\"p\">,</span> <span class=\"n\">ModeDefinition</span><span class=\"p\">),</span>\n            <span class=\"n\">intermediate_storage_def</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span>\n                <span class=\"n\">intermediate_storage_def</span><span class=\"p\">,</span> <span class=\"s2\">&quot;intermediate_storage_def&quot;</span><span class=\"p\">,</span> <span class=\"n\">IntermediateStorageDefinition</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">pipeline_run</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">pipeline_run</span><span class=\"p\">,</span> <span class=\"s2\">&quot;pipeline_run&quot;</span><span class=\"p\">,</span> <span class=\"n\">PipelineRun</span><span class=\"p\">),</span>\n            <span class=\"n\">instance</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span><span class=\"n\">instance</span><span class=\"p\">,</span> <span class=\"s2\">&quot;instance&quot;</span><span class=\"p\">,</span> <span class=\"n\">DagsterInstance</span><span class=\"p\">),</span>\n            <span class=\"n\">environment_config</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span>\n                <span class=\"n\">environment_config</span><span class=\"p\">,</span> <span class=\"s2\">&quot;environment_config&quot;</span><span class=\"p\">,</span> <span class=\"n\">EnvironmentConfig</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">type_storage_plugin_registry</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">inst_param</span><span class=\"p\">(</span>\n                <span class=\"n\">type_storage_plugin_registry</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;type_storage_plugin_registry&quot;</span><span class=\"p\">,</span>\n                <span class=\"n\">TypeStoragePluginRegistry</span><span class=\"p\">,</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">resources</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">not_none_param</span><span class=\"p\">(</span><span class=\"n\">resources</span><span class=\"p\">,</span> <span class=\"s2\">&quot;resources&quot;</span><span class=\"p\">),</span>\n            <span class=\"n\">intermediate_storage_config</span><span class=\"o\">=</span><span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">dict_param</span><span class=\"p\">(</span>\n                <span class=\"n\">intermediate_storage_config</span><span class=\"p\">,</span> <span class=\"n\">intermediate_storage_config</span><span class=\"p\">,</span> <span class=\"n\">key_type</span><span class=\"o\">=</span><span class=\"nb\">str</span>\n            <span class=\"p\">),</span>\n        <span class=\"p\">)</span></div>\n</pre></div>", "current_page_name": "_modules/dagster/core/storage/init", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}