{"parents": [{"link": "../../", "title": "Module code"}], "title": "dagster_datadog.resources", "body": "<h1>Source code for dagster_datadog.resources</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">Field</span><span class=\"p\">,</span> <span class=\"n\">StringSource</span><span class=\"p\">,</span> <span class=\"n\">resource</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datadog</span> <span class=\"kn\">import</span> <span class=\"n\">DogStatsd</span><span class=\"p\">,</span> <span class=\"n\">initialize</span><span class=\"p\">,</span> <span class=\"n\">statsd</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">DataDogResource</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Mirroring levels from the dogstatsd library</span>\n    <span class=\"n\">OK</span><span class=\"p\">,</span> <span class=\"n\">WARNING</span><span class=\"p\">,</span> <span class=\"n\">CRITICAL</span><span class=\"p\">,</span> <span class=\"n\">UNKNOWN</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n        <span class=\"n\">DogStatsd</span><span class=\"o\">.</span><span class=\"n\">OK</span><span class=\"p\">,</span>\n        <span class=\"n\">DogStatsd</span><span class=\"o\">.</span><span class=\"n\">WARNING</span><span class=\"p\">,</span>\n        <span class=\"n\">DogStatsd</span><span class=\"o\">.</span><span class=\"n\">CRITICAL</span><span class=\"p\">,</span>\n        <span class=\"n\">DogStatsd</span><span class=\"o\">.</span><span class=\"n\">UNKNOWN</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">api_key</span><span class=\"p\">,</span> <span class=\"n\">app_key</span><span class=\"p\">):</span>\n        <span class=\"n\">initialize</span><span class=\"p\">(</span><span class=\"n\">api_key</span><span class=\"o\">=</span><span class=\"n\">api_key</span><span class=\"p\">,</span> <span class=\"n\">app_key</span><span class=\"o\">=</span><span class=\"n\">app_key</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># Pull in methods from the dogstatsd library</span>\n        <span class=\"k\">for</span> <span class=\"n\">method</span> <span class=\"ow\">in</span> <span class=\"p\">[</span>\n            <span class=\"s2\">&quot;event&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;gauge&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;increment&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;decrement&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;histogram&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;distribution&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;set&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;service_check&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;timed&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;timing&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">]:</span>\n            <span class=\"nb\">setattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"p\">,</span> <span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"n\">statsd</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"p\">))</span>\n\n\n<div class=\"viewcode-block\" id=\"datadog_resource\"><a class=\"viewcode-back\" href=\"../../../sections/api/apidocs/libraries/dagster_datadog/#dagster_datadog.datadog_resource\">[docs]</a><span class=\"nd\">@resource</span><span class=\"p\">(</span>\n    <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;api_key&quot;</span><span class=\"p\">:</span> <span class=\"n\">Field</span><span class=\"p\">(</span><span class=\"n\">StringSource</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s2\">&quot;Datadog API key&quot;</span><span class=\"p\">),</span>\n        <span class=\"s2\">&quot;app_key&quot;</span><span class=\"p\">:</span> <span class=\"n\">Field</span><span class=\"p\">(</span><span class=\"n\">StringSource</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s2\">&quot;Datadog application key&quot;</span><span class=\"p\">),</span>\n    <span class=\"p\">},</span>\n    <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s2\">&quot;This resource is for publishing to DataDog&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">datadog_resource</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;This resource is a thin wrapper over the</span>\n<span class=\"sd\">    `dogstatsd library &lt;https://datadogpy.readthedocs.io/en/latest/&gt;`_.</span>\n\n<span class=\"sd\">    As such, we directly mirror the public API methods of DogStatsd here; you can refer to the</span>\n<span class=\"sd\">    `DataDog documentation &lt;https://docs.datadoghq.com/developers/dogstatsd/&gt;`_ for how to use this</span>\n<span class=\"sd\">    resource.</span>\n\n<span class=\"sd\">    Examples:</span>\n\n<span class=\"sd\">        .. code-block:: python</span>\n\n<span class=\"sd\">            @solid(required_resource_keys={&#39;datadog&#39;})</span>\n<span class=\"sd\">            def datadog_solid(context):</span>\n<span class=\"sd\">                dd = context.resources.datadog</span>\n\n<span class=\"sd\">                dd.event(&#39;Man down!&#39;, &#39;This server needs assistance.&#39;)</span>\n<span class=\"sd\">                dd.gauge(&#39;users.online&#39;, 1001, tags=[&quot;protocol:http&quot;])</span>\n<span class=\"sd\">                dd.increment(&#39;page.views&#39;)</span>\n<span class=\"sd\">                dd.decrement(&#39;page.views&#39;)</span>\n<span class=\"sd\">                dd.histogram(&#39;album.photo.count&#39;, 26, tags=[&quot;gender:female&quot;])</span>\n<span class=\"sd\">                dd.distribution(&#39;album.photo.count&#39;, 26, tags=[&quot;color:blue&quot;])</span>\n<span class=\"sd\">                dd.set(&#39;visitors.uniques&#39;, 999, tags=[&quot;browser:ie&quot;])</span>\n<span class=\"sd\">                dd.service_check(&#39;svc.check_name&#39;, dd.WARNING)</span>\n<span class=\"sd\">                dd.timing(&quot;query.response.time&quot;, 1234)</span>\n\n<span class=\"sd\">                # Use timed decorator</span>\n<span class=\"sd\">                @dd.timed(&#39;run_fn&#39;)</span>\n<span class=\"sd\">                def run_fn():</span>\n<span class=\"sd\">                    pass</span>\n\n<span class=\"sd\">                run_fn()</span>\n\n<span class=\"sd\">            @pipeline(mode_defs=[ModeDefinition(resource_defs={&#39;datadog&#39;: datadog_resource})])</span>\n<span class=\"sd\">            def dd_pipeline():</span>\n<span class=\"sd\">                datadog_solid()</span>\n\n<span class=\"sd\">            result = execute_pipeline(</span>\n<span class=\"sd\">                dd_pipeline,</span>\n<span class=\"sd\">                {&#39;resources&#39;: {&#39;datadog&#39;: {&#39;config&#39;: {&#39;api_key&#39;: &#39;YOUR_KEY&#39;, &#39;app_key&#39;: &#39;YOUR_KEY&#39;}}}},</span>\n<span class=\"sd\">            )</span>\n\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"k\">return</span> <span class=\"n\">DataDogResource</span><span class=\"p\">(</span>\n        <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resource_config</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;api_key&quot;</span><span class=\"p\">),</span> <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resource_config</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;app_key&quot;</span><span class=\"p\">)</span>\n    <span class=\"p\">)</span></div>\n</pre></div>", "current_page_name": "_modules/dagster_datadog/resources", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}