{"parents": [{"link": "../../", "title": "Module code"}], "title": "dagster_slack.resources", "body": "<h1>Source code for dagster_slack.resources</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">Field</span><span class=\"p\">,</span> <span class=\"n\">StringSource</span><span class=\"p\">,</span> <span class=\"n\">resource</span>\n<span class=\"kn\">from</span> <span class=\"nn\">slack</span> <span class=\"kn\">import</span> <span class=\"n\">WebClient</span>\n\n\n<div class=\"viewcode-block\" id=\"slack_resource\"><a class=\"viewcode-back\" href=\"../../../sections/api/apidocs/libraries/dagster_slack/#dagster_slack.slack_resource\">[docs]</a><span class=\"nd\">@resource</span><span class=\"p\">(</span>\n    <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;token&quot;</span><span class=\"p\">:</span> <span class=\"n\">Field</span><span class=\"p\">(</span>\n            <span class=\"n\">StringSource</span><span class=\"p\">,</span>\n            <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s2\">&quot;&quot;&quot;To configure access to the Slack API, you&#39;ll need an access</span>\n<span class=\"s2\">                    token provisioned with access to your Slack workspace.</span>\n\n<span class=\"s2\">                    Tokens are typically either user tokens or bot tokens. For programmatic posting</span>\n<span class=\"s2\">                    to Slack from this resource, you probably want to provision and use a bot token.</span>\n\n<span class=\"s2\">                    More in the Slack API documentation here: https://api.slack.com/docs/token-types</span>\n<span class=\"s2\">                    &quot;&quot;&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">},</span>\n    <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s2\">&quot;This resource is for connecting to Slack&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">slack_resource</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;This resource is for connecting to Slack.</span>\n\n<span class=\"sd\">    By configuring this Slack resource, you can post messages to Slack from any Dagster solid:</span>\n\n<span class=\"sd\">    Examples:</span>\n\n<span class=\"sd\">    .. code-block:: python</span>\n\n<span class=\"sd\">        import os</span>\n\n<span class=\"sd\">        from dagster import solid, execute_pipeline, ModeDefinition</span>\n<span class=\"sd\">        from dagster_slack import slack_resource</span>\n\n\n<span class=\"sd\">        @solid(required_resource_keys={&#39;slack&#39;})</span>\n<span class=\"sd\">        def slack_solid(context):</span>\n<span class=\"sd\">            context.resources.slack.chat_postMessage(channel=&#39;#noise&#39;, text=&#39;:wave: hey there!&#39;)</span>\n\n<span class=\"sd\">        @pipeline(</span>\n<span class=\"sd\">            mode_defs=[ModeDefinition(resource_defs={&#39;slack&#39;: slack_resource})],</span>\n<span class=\"sd\">        )</span>\n<span class=\"sd\">        def slack_pipeline():</span>\n<span class=\"sd\">            slack_solid()</span>\n\n<span class=\"sd\">        execute_pipeline(</span>\n<span class=\"sd\">            slack_pipeline, {&#39;resources&#39;: {&#39;slack&#39;: {&#39;config&#39;: {&#39;token&#39;: os.getenv(&#39;SLACK_TOKEN&#39;)}}}}</span>\n<span class=\"sd\">        )</span>\n\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"k\">return</span> <span class=\"n\">WebClient</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resource_config</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;token&quot;</span><span class=\"p\">))</span></div>\n</pre></div>", "current_page_name": "_modules/dagster_slack/resources", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}