{"parents": [{"link": "../../", "title": "Module code"}], "title": "dagster_spark.solids", "body": "<h1>Source code for dagster_spark.solids</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">InputDefinition</span><span class=\"p\">,</span> <span class=\"n\">Nothing</span><span class=\"p\">,</span> <span class=\"n\">OutputDefinition</span><span class=\"p\">,</span> <span class=\"n\">check</span><span class=\"p\">,</span> <span class=\"n\">solid</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.configs</span> <span class=\"kn\">import</span> <span class=\"n\">define_spark_config</span>\n\n\n<div class=\"viewcode-block\" id=\"create_spark_solid\"><a class=\"viewcode-back\" href=\"../../../sections/api/apidocs/libraries/dagster_spark/#dagster_spark.create_spark_solid\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">create_spark_solid</span><span class=\"p\">(</span>\n    <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">main_class</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"nb\">frozenset</span><span class=\"p\">([</span><span class=\"s2\">&quot;spark&quot;</span><span class=\"p\">])</span>\n<span class=\"p\">):</span>\n    <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">str_param</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;name&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">str_param</span><span class=\"p\">(</span><span class=\"n\">main_class</span><span class=\"p\">,</span> <span class=\"s2\">&quot;main_class&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">opt_str_param</span><span class=\"p\">(</span><span class=\"n\">description</span><span class=\"p\">,</span> <span class=\"s2\">&quot;description&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;A parameterized Spark job.&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">check</span><span class=\"o\">.</span><span class=\"n\">set_param</span><span class=\"p\">(</span><span class=\"n\">required_resource_keys</span><span class=\"p\">,</span> <span class=\"s2\">&quot;required_resource_keys&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@solid</span><span class=\"p\">(</span>\n        <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">name</span><span class=\"p\">,</span>\n        <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"n\">description</span><span class=\"p\">,</span>\n        <span class=\"n\">config_schema</span><span class=\"o\">=</span><span class=\"n\">define_spark_config</span><span class=\"p\">(),</span>\n        <span class=\"n\">input_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">InputDefinition</span><span class=\"p\">(</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">,</span> <span class=\"n\">Nothing</span><span class=\"p\">)],</span>\n        <span class=\"n\">output_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">OutputDefinition</span><span class=\"p\">(</span><span class=\"n\">Nothing</span><span class=\"p\">)],</span>\n        <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;kind&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;spark&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;main_class&quot;</span><span class=\"p\">:</span> <span class=\"n\">main_class</span><span class=\"p\">},</span>\n        <span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"n\">required_resource_keys</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">spark_solid</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">):</span>  <span class=\"c1\"># pylint: disable=unused-argument</span>\n        <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">spark</span><span class=\"o\">.</span><span class=\"n\">run_spark_job</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">solid_config</span><span class=\"p\">,</span> <span class=\"n\">main_class</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">spark_solid</span></div>\n</pre></div>", "current_page_name": "_modules/dagster_spark/solids", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}