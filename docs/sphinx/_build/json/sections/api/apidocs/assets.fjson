{"parents": [], "prev": {"link": "../../../../", "title": "&lt;no title&gt;"}, "next": {"link": "../cli/", "title": "Dagster CLI"}, "title": "Asset Stores (Experimental)", "meta": null, "body": "<div class=\"section\" id=\"asset-stores-experimental\">\n<h1>Asset Stores (Experimental)<a class=\"headerlink\" href=\"#asset-stores-experimental\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"asset-stores\">\n<h2>Asset Stores<a class=\"headerlink\" href=\"#asset-stores\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Asset stores are user-provided objects that specify how to store step outputs and retrieve step inputs.</p>\n<dl class=\"class\">\n<dt id=\"dagster.AssetStore\">\n<em class=\"property\">class </em><code class=\"sig-prename descclassname\">dagster.</code><code class=\"sig-name descname\">AssetStore</code><a class=\"reference internal\" href=\"../../../../_modules/dagster/core/storage/asset_store/#AssetStore\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster.AssetStore\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Base class for user-provided asset store.</p>\n<p>Extend this class to handle asset operations. Users should implement <code class=\"docutils literal notranslate\"><span class=\"pre\">set_asset</span></code> to store a\ndata object that can be tracked by the Dagster machinery and <code class=\"docutils literal notranslate\"><span class=\"pre\">get_asset</span></code> to retrieve a data\nobject.</p>\n<dl class=\"method\">\n<dt id=\"dagster.AssetStore.get_asset\">\n<em class=\"property\">abstract </em><code class=\"sig-name descname\">get_asset</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">context</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../_modules/dagster/core/storage/asset_store/#AssetStore.get_asset\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster.AssetStore.get_asset\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>The user-defined read method that loads data given its metadata.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><p><strong>context</strong> (<a class=\"reference internal\" href=\"../execution/#dagster.AssetStoreContext\" title=\"dagster.AssetStoreContext\"><em>AssetStoreContext</em></a>) \u2013 The context of the step output that produces this asset.</p>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>The data object.</p>\n</dd>\n<dt class=\"field-odd\">Return type</dt>\n<dd class=\"field-odd\"><p>Any</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"method\">\n<dt id=\"dagster.AssetStore.set_asset\">\n<em class=\"property\">abstract </em><code class=\"sig-name descname\">set_asset</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">context</em>, <em class=\"sig-param\">obj</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../_modules/dagster/core/storage/asset_store/#AssetStore.set_asset\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster.AssetStore.set_asset\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>The user-definied write method that stores a data object.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>context</strong> (<a class=\"reference internal\" href=\"../execution/#dagster.AssetStoreContext\" title=\"dagster.AssetStoreContext\"><em>AssetStoreContext</em></a>) \u2013 The context of the step output that produces this asset.</p></li>\n<li><p><strong>obj</strong> (<em>Any</em>) \u2013 The data object to be stored.</p></li>\n</ul>\n</dd>\n</dl>\n</dd></dl>\n\n</dd></dl>\n\n</div>\n<div class=\"section\" id=\"asset-stores-as-resources\">\n<h2>Asset Stores as Resources<a class=\"headerlink\" href=\"#asset-stores-as-resources\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Asset stores are used as resources, which enables users to supply different asset stores for\nthe same solid outputs in different modes.</p>\n<dl class=\"function\">\n<dt id=\"dagster.mem_asset_store\">\n<code class=\"sig-prename descclassname\">dagster.</code><code class=\"sig-name descname\">mem_asset_store</code><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../_modules/dagster/core/storage/asset_store/#mem_asset_store\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster.mem_asset_store\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster.fs_asset_store\">\n<code class=\"sig-prename descclassname\">dagster.</code><code class=\"sig-name descname\">fs_asset_store</code><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../_modules/dagster/core/storage/asset_store/#fs_asset_store\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster.fs_asset_store\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Built-in filesystem asset store that stores and retrieves values using pickling.</p>\n<p>It allows users to specify a base directory where all the step output will be stored in. It\nserializes and deserializes output values (assets) using pickling and automatically constructs\nthe filepaths for the assets.</p>\n<p>Example usage:</p>\n<p>1. Specify a pipeline-level asset store using the reserved resource key <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;asset_store&quot;</span></code>,\nwhich will set the given asset store on all solids across a pipeline.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@solid</span>\n<span class=\"k\">def</span> <span class=\"nf\">solid_a</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">df</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">df</span>\n\n<span class=\"nd\">@solid</span>\n<span class=\"k\">def</span> <span class=\"nf\">solid_b</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">df</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">df</span><span class=\"p\">[:</span><span class=\"mi\">5</span><span class=\"p\">]</span>\n\n<span class=\"nd\">@pipeline</span><span class=\"p\">(</span><span class=\"n\">mode_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">ModeDefinition</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;asset_store&quot;</span><span class=\"p\">:</span> <span class=\"n\">fs_asset_store</span><span class=\"p\">})])</span>\n<span class=\"k\">def</span> <span class=\"nf\">pipe</span><span class=\"p\">():</span>\n    <span class=\"n\">solid_b</span><span class=\"p\">(</span><span class=\"n\">solid_a</span><span class=\"p\">())</span>\n</pre></div>\n</div>\n<p>2. Specify asset store on <a class=\"reference internal\" href=\"../solids/#dagster.OutputDefinition\" title=\"dagster.OutputDefinition\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OutputDefinition</span></code></a>, which allows the user to set different\nasset stores on different step outputs.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@solid</span><span class=\"p\">(</span><span class=\"n\">output_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">OutputDefinition</span><span class=\"p\">(</span><span class=\"n\">asset_store_key</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_asset_store&quot;</span><span class=\"p\">)])</span>\n<span class=\"k\">def</span> <span class=\"nf\">solid_a</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">df</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">df</span>\n\n<span class=\"nd\">@solid</span>\n<span class=\"k\">def</span> <span class=\"nf\">solid_b</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">df</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">df</span><span class=\"p\">[:</span><span class=\"mi\">5</span><span class=\"p\">]</span>\n\n<span class=\"nd\">@pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">mode_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">ModeDefinition</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;my_asset_store&quot;</span><span class=\"p\">:</span> <span class=\"n\">fs_asset_store</span><span class=\"p\">})]</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">pipe</span><span class=\"p\">():</span>\n    <span class=\"n\">solid_b</span><span class=\"p\">(</span><span class=\"n\">solid_a</span><span class=\"p\">())</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster.custom_path_fs_asset_store\">\n<code class=\"sig-prename descclassname\">dagster.</code><code class=\"sig-name descname\">custom_path_fs_asset_store</code><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../_modules/dagster/core/storage/asset_store/#custom_path_fs_asset_store\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster.custom_path_fs_asset_store\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Built-in asset store that allows users to custom output file path per output definition.</p>\n<p>It also allows users to specify a base directory where all the step output will be stored in. It\nserializes and deserializes output values (assets) using pickling and stores the pickled object\nin the user-provided file paths.</p>\n<p>Example usage:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@solid</span><span class=\"p\">(</span>\n    <span class=\"n\">output_defs</span><span class=\"o\">=</span><span class=\"p\">[</span>\n        <span class=\"n\">OutputDefinition</span><span class=\"p\">(</span>\n            <span class=\"n\">asset_store_key</span><span class=\"o\">=</span><span class=\"s2\">&quot;asset_store&quot;</span><span class=\"p\">,</span> <span class=\"n\">asset_metadata</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;path&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;path/to/sample_output&quot;</span><span class=\"p\">}</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">sample_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">df</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">df</span><span class=\"p\">[:</span><span class=\"mi\">5</span><span class=\"p\">]</span>\n\n<span class=\"nd\">@pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">mode_defs</span><span class=\"o\">=</span><span class=\"p\">[</span>\n        <span class=\"n\">ModeDefinition</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;asset_store&quot;</span><span class=\"p\">:</span> <span class=\"n\">custom_path_fs_asset_store</span><span class=\"p\">}),</span>\n    <span class=\"p\">],</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">pipe</span><span class=\"p\">():</span>\n    <span class=\"n\">sample_data</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["sections/api/apidocs/cli", "Dagster CLI", "N", "next"], ["index", "&lt;no title&gt;", "P", "previous"]], "sourcename": "sections/api/apidocs/assets.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Asset Stores (Experimental)</a><ul>\n<li><a class=\"reference internal\" href=\"#asset-stores\">Asset Stores</a></li>\n<li><a class=\"reference internal\" href=\"#asset-stores-as-resources\">Asset Stores as Resources</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "sections/api/apidocs/assets", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}