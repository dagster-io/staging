{"parents": [], "prev": {"link": "../dagster_ge/", "title": "Great Expectations (dagster_ge)"}, "next": {"link": "../dagster_k8s/", "title": "Kubernetes (dagster_k8s)"}, "title": "GitHub (dagster_github)", "meta": null, "body": "<div class=\"section\" id=\"github-dagster-github\">\n<h1>GitHub (dagster_github)<a class=\"headerlink\" href=\"#github-dagster-github\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>This library provides an integration with GitHub Apps, to support performing various automation\noperations within your github repositories and with the tighter permissions scopes that github apps\nallow for vs using a personal token.</p>\n<p>Presently, it provides a thin wrapper on the <a class=\"reference external\" href=\"https://developer.github.com/v4/\">github v4 graphql API</a>.</p>\n<p>To use this integration, you\u2019ll first need to create a GitHub App for it.</p>\n<ol class=\"arabic simple\">\n<li><p><strong>Create App</strong>: Follow the instructions in\n<a class=\"reference external\" href=\"https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/\">https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/</a>, You will end up with a private key and App ID, which will be used when configuring the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">dagster-github</span></code> resource. <strong>Note</strong> you will need to grant your app the relevent permissions\nfor the API requests you want to make, for example to post issues it will need read/write access\nfor the issues repository permission, more info on GitHub application permissions can be found\n<a class=\"reference external\" href=\"https://developer.github.com/v3/apps/permissions/\">here</a></p></li>\n<li><p><strong>Install App</strong>: Follow the instructions in\n<a class=\"reference external\" href=\"https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/#step-7-install-the-app-on-your-account\">https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/#step-7-install-the-app-on-your-account</a></p></li>\n<li><p><strong>Find your installation_id</strong>: You can pull this from the GitHub app administration page,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">https://github.com/apps/&lt;app-name&gt;/installations/&lt;installation_id&gt;</span></code>. <strong>Note</strong> if your app is\ninstalled more than once you can also programatically retrieve these IDs.</p></li>\n</ol>\n<p>Sharing your App ID and Installation ID is fine, but make sure that the Private Key for your app is\nstored securily.</p>\n</div>\n<div class=\"section\" id=\"posting-issues\">\n<h1>Posting Issues<a class=\"headerlink\" href=\"#posting-issues\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Now, you can create issues in GitHub from Dagster with the GitHub resource:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">solid</span><span class=\"p\">,</span> <span class=\"n\">execute_pipeline</span><span class=\"p\">,</span> <span class=\"n\">ModeDefinition</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster_github</span> <span class=\"kn\">import</span> <span class=\"n\">github_resource</span>\n\n\n<span class=\"nd\">@solid</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;github&#39;</span><span class=\"p\">})</span>\n<span class=\"k\">def</span> <span class=\"nf\">github_solid</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">github</span><span class=\"o\">.</span><span class=\"n\">create_issue</span><span class=\"p\">(</span>\n        <span class=\"n\">repo_name</span><span class=\"o\">=</span><span class=\"s1\">&#39;dagster&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">repo_owner</span><span class=\"o\">=</span><span class=\"s1\">&#39;dagster-io&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">&#39;Dagster</span><span class=\"se\">\\&#39;</span><span class=\"s1\">s first github issue&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">body</span><span class=\"o\">=</span><span class=\"s1\">&#39;this open source thing seems like a pretty good idea&#39;</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n\n<span class=\"nd\">@pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">mode_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">ModeDefinition</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;github&#39;</span><span class=\"p\">:</span> <span class=\"n\">github_resource</span><span class=\"p\">})],</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">github_pipeline</span><span class=\"p\">():</span>\n    <span class=\"n\">github_solid</span><span class=\"p\">()</span>\n\n<span class=\"n\">execute_pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">github_pipeline</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;resources&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;github&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;config&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;github_app_id&quot;</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">&#39;GITHUB_APP_ID&#39;</span><span class=\"p\">),</span>\n        <span class=\"s2\">&quot;github_app_private_rsa_key&quot;</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">&#39;GITHUB_PRIVATE_KEY&#39;</span><span class=\"p\">),</span>\n        <span class=\"s2\">&quot;github_installation_id&quot;</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">&#39;GITHUB_INSTALLATION_ID&#39;</span><span class=\"p\">),</span>\n    <span class=\"p\">}}}}</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Run the above code, and you\u2019ll see the issue appear in GitHub:\n<span class=\"raw-html-m2r\"><img width=\"636\" src=\"https://user-images.githubusercontent.com/5943242/72079909-c6012300-32c9-11ea-8acc-19e6f5f3d067.png\"></span></p>\n<p>By provisioning <code class=\"docutils literal notranslate\"><span class=\"pre\">github_resource</span></code> as a Dagster pipeline resource, you can post to GitHub from\nwithin any solid execution.</p>\n</div>\n<div class=\"section\" id=\"executing-graphql-queries\">\n<h1>Executing GraphQL queries<a class=\"headerlink\" href=\"#executing-graphql-queries\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">dagster</span> <span class=\"kn\">import</span> <span class=\"n\">solid</span><span class=\"p\">,</span> <span class=\"n\">execute_pipeline</span><span class=\"p\">,</span> <span class=\"n\">ModeDefinition</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dagster_github</span> <span class=\"kn\">import</span> <span class=\"n\">github_resource</span>\n\n\n<span class=\"nd\">@solid</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;github&#39;</span><span class=\"p\">})</span>\n<span class=\"k\">def</span> <span class=\"nf\">github_solid</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">github</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span>\n        <span class=\"n\">query</span><span class=\"o\">=</span><span class=\"s2\">&quot;&quot;&quot;</span>\n<span class=\"s2\">        query get_repo_id($repo_name: String!, $repo_owner: String!) {</span>\n<span class=\"s2\">            repository(name: $repo_name, owner: $repo_owner) {</span>\n<span class=\"s2\">                id</span>\n<span class=\"s2\">            }</span>\n<span class=\"s2\">        }</span>\n<span class=\"s2\">        &quot;&quot;&quot;</span><span class=\"p\">,</span>\n        <span class=\"n\">variables</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;repo_name&quot;</span><span class=\"p\">:</span> <span class=\"n\">repo_name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;repo_owner&quot;</span><span class=\"p\">:</span> <span class=\"n\">repo_owner</span><span class=\"p\">},</span>\n    <span class=\"p\">)</span>\n\n<span class=\"nd\">@pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">mode_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">ModeDefinition</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;github&#39;</span><span class=\"p\">:</span> <span class=\"n\">github_resource</span><span class=\"p\">})],</span>\n<span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">github_pipeline</span><span class=\"p\">():</span>\n    <span class=\"n\">github_solid</span><span class=\"p\">()</span>\n\n<span class=\"n\">execute_pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">github_pipeline</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;resources&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;github&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;config&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;github_app_id&quot;</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">&#39;GITHUB_APP_ID&#39;</span><span class=\"p\">),</span>\n        <span class=\"s2\">&quot;github_app_private_rsa_key&quot;</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">&#39;GITHUB_PRIVATE_KEY&#39;</span><span class=\"p\">),</span>\n        <span class=\"s2\">&quot;github_installation_id&quot;</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">&#39;GITHUB_INSTALLATION_ID&#39;</span><span class=\"p\">),</span>\n    <span class=\"p\">}}}}</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<dl class=\"data\">\n<dt id=\"dagster_github.github_resource\">\n<code class=\"sig-prename descclassname\">dagster_github.</code><code class=\"sig-name descname\">github_resource</code><em class=\"property\"> ResourceDefinition</em><a class=\"reference internal\" href=\"../../../../../_modules/dagster_github/resources/#github_resource\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_github.github_resource\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["sections/api/apidocs/libraries/dagster_k8s", "Kubernetes (dagster_k8s)", "N", "next"], ["sections/api/apidocs/libraries/dagster_ge", "Great Expectations (dagster_ge)", "P", "previous"]], "sourcename": "sections/api/apidocs/libraries/dagster_github.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">GitHub (dagster_github)</a></li>\n<li><a class=\"reference internal\" href=\"#posting-issues\">Posting Issues</a></li>\n<li><a class=\"reference internal\" href=\"#executing-graphql-queries\">Executing GraphQL queries</a></li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "sections/api/apidocs/libraries/dagster_github", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}