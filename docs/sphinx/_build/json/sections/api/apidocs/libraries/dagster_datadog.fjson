{"parents": [], "prev": {"link": "../dagster_databricks/", "title": "Databricks (dagster_databricks)"}, "next": {"link": "../dagster_dbt/", "title": "dbt (dagster_dbt)"}, "title": "Datadog (dagster_datadog)", "meta": null, "body": "<div class=\"section\" id=\"datadog-dagster-datadog\">\n<h1>Datadog (dagster_datadog)<a class=\"headerlink\" href=\"#datadog-dagster-datadog\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>This library provides an integration with Datadog, to support publishing metrics to Datadog from\nwithin Dagster solids.</p>\n<div class=\"line-block\">\n<div class=\"line\"><br /></div>\n</div>\n<p>We use the Python <a class=\"reference external\" href=\"https://github.com/DataDog/datadogpy\">datadogpy</a> library. To use it, you\u2019ll\nfirst need to create a DataDog account and get both <a class=\"reference external\" href=\"https://docs.datadoghq.com/account_management/api-app-keys/\">API and Application keys</a>.</p>\n<div class=\"line-block\">\n<div class=\"line\"><br /></div>\n</div>\n<p>The integration uses <a class=\"reference external\" href=\"https://docs.datadoghq.com/developers/dogstatsd/\">DogStatsD</a>, so you\u2019ll need\nto ensure the datadog agent is running on the host you\u2019re sending metrics from.</p>\n<dl class=\"data\">\n<dt id=\"dagster_datadog.datadog_resource\">\n<code class=\"sig-prename descclassname\">dagster_datadog.</code><code class=\"sig-name descname\">datadog_resource</code><em class=\"property\"> ResourceDefinition</em><a class=\"reference internal\" href=\"../../../../../_modules/dagster_datadog/resources/#datadog_resource\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_datadog.datadog_resource\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>This resource is a thin wrapper over the\n<a class=\"reference external\" href=\"https://datadogpy.readthedocs.io/en/latest/\">dogstatsd library</a>.</p>\n<p>As such, we directly mirror the public API methods of DogStatsd here; you can refer to the\n<a class=\"reference external\" href=\"https://docs.datadoghq.com/developers/dogstatsd/\">DataDog documentation</a> for how to use this\nresource.</p>\n<p class=\"rubric\">Examples</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@solid</span><span class=\"p\">(</span><span class=\"n\">required_resource_keys</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;datadog&#39;</span><span class=\"p\">})</span>\n<span class=\"k\">def</span> <span class=\"nf\">datadog_solid</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"n\">dd</span> <span class=\"o\">=</span> <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">resources</span><span class=\"o\">.</span><span class=\"n\">datadog</span>\n\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">event</span><span class=\"p\">(</span><span class=\"s1\">&#39;Man down!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;This server needs assistance.&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">gauge</span><span class=\"p\">(</span><span class=\"s1\">&#39;users.online&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1001</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;protocol:http&quot;</span><span class=\"p\">])</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">increment</span><span class=\"p\">(</span><span class=\"s1\">&#39;page.views&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">decrement</span><span class=\"p\">(</span><span class=\"s1\">&#39;page.views&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"s1\">&#39;album.photo.count&#39;</span><span class=\"p\">,</span> <span class=\"mi\">26</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;gender:female&quot;</span><span class=\"p\">])</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">distribution</span><span class=\"p\">(</span><span class=\"s1\">&#39;album.photo.count&#39;</span><span class=\"p\">,</span> <span class=\"mi\">26</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;color:blue&quot;</span><span class=\"p\">])</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"s1\">&#39;visitors.uniques&#39;</span><span class=\"p\">,</span> <span class=\"mi\">999</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;browser:ie&quot;</span><span class=\"p\">])</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">service_check</span><span class=\"p\">(</span><span class=\"s1\">&#39;svc.check_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">WARNING</span><span class=\"p\">)</span>\n    <span class=\"n\">dd</span><span class=\"o\">.</span><span class=\"n\">timing</span><span class=\"p\">(</span><span class=\"s2\">&quot;query.response.time&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1234</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Use timed decorator</span>\n    <span class=\"nd\">@dd</span><span class=\"o\">.</span><span class=\"n\">timed</span><span class=\"p\">(</span><span class=\"s1\">&#39;run_fn&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">run_fn</span><span class=\"p\">():</span>\n        <span class=\"k\">pass</span>\n\n    <span class=\"n\">run_fn</span><span class=\"p\">()</span>\n\n<span class=\"nd\">@pipeline</span><span class=\"p\">(</span><span class=\"n\">mode_defs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">ModeDefinition</span><span class=\"p\">(</span><span class=\"n\">resource_defs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;datadog&#39;</span><span class=\"p\">:</span> <span class=\"n\">datadog_resource</span><span class=\"p\">})])</span>\n<span class=\"k\">def</span> <span class=\"nf\">dd_pipeline</span><span class=\"p\">():</span>\n    <span class=\"n\">datadog_solid</span><span class=\"p\">()</span>\n\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">execute_pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">dd_pipeline</span><span class=\"p\">,</span>\n    <span class=\"p\">{</span><span class=\"s1\">&#39;resources&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;datadog&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;config&#39;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">&#39;api_key&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;YOUR_KEY&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;app_key&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;YOUR_KEY&#39;</span><span class=\"p\">}}}},</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["sections/api/apidocs/libraries/dagster_dbt", "dbt (dagster_dbt)", "N", "next"], ["sections/api/apidocs/libraries/dagster_databricks", "Databricks (dagster_databricks)", "P", "previous"]], "sourcename": "sections/api/apidocs/libraries/dagster_datadog.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Datadog (dagster_datadog)</a></li>\n</ul>\n", "display_toc": false, "page_source_suffix": ".rst", "current_page_name": "sections/api/apidocs/libraries/dagster_datadog", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}