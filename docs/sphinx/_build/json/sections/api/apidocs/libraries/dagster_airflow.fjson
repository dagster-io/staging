{"parents": [], "prev": {"link": "../../utilities/", "title": "Utilities"}, "next": {"link": "../dagster_aws/", "title": "AWS (dagster_aws)"}, "title": "Airflow (dagster_airflow)", "meta": null, "body": "<div class=\"section\" id=\"airflow-dagster-airflow\">\n<h1>Airflow (dagster_airflow)<a class=\"headerlink\" href=\"#airflow-dagster-airflow\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_airflow_dag\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_airflow_dag</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">module_name</em>, <em class=\"sig-param\">pipeline_name</em>, <em class=\"sig-param\">run_config=None</em>, <em class=\"sig-param\">mode=None</em>, <em class=\"sig-param\">instance=None</em>, <em class=\"sig-param\">dag_id=None</em>, <em class=\"sig-param\">dag_description=None</em>, <em class=\"sig-param\">dag_kwargs=None</em>, <em class=\"sig-param\">op_kwargs=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/factory/#make_airflow_dag\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_airflow_dag\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct an Airflow DAG corresponding to a given Dagster pipeline.</p>\n<p>Tasks in the resulting DAG will execute the Dagster logic they encapsulate as a Python\ncallable, run by an underlying <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">PythonOperator</span></code>. As a\nconsequence, both dagster, any Python dependencies required by your solid logic, and the module\ncontaining your pipeline definition must be available in the Python environment within which\nyour Airflow tasks execute. If you cannot install requirements into this environment, or you\nare looking for a containerized solution to provide better isolation, see instead\n<a class=\"reference internal\" href=\"#dagster_airflow.make_airflow_dag_containerized\" title=\"dagster_airflow.make_airflow_dag_containerized\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">make_airflow_dag_containerized()</span></code></a>.</p>\n<p>This function should be invoked in an Airflow DAG definition file, such as that created by an\ninvocation of the dagster-airflow scaffold CLI tool.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>module_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 The name of the importable module in which the pipeline definition can be\nfound.</p></li>\n<li><p><strong>pipeline_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 The name of the pipeline definition.</p></li>\n<li><p><strong>run_config</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 The environment config, if any, with which to compile\nthe pipeline to an execution plan, as a Python dict.</p></li>\n<li><p><strong>mode</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The mode in which to execute the pipeline.</p></li>\n<li><p><strong>instance</strong> (<em>Optional</em><em>[</em><a class=\"reference internal\" href=\"../../internals/#dagster.DagsterInstance\" title=\"dagster.DagsterInstance\"><em>DagsterInstance</em></a><em>]</em>) \u2013 The Dagster instance to use to execute the pipeline.</p></li>\n<li><p><strong>dag_id</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The id to use for the compiled Airflow DAG (passed through to\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a>).</p></li>\n<li><p><strong>dag_description</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The description to use for the compiled Airflow DAG\n(passed through to <a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a>)</p></li>\n<li><p><strong>dag_kwargs</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 Any additional kwargs to pass to the Airflow\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a> constructor, including <code class=\"docutils literal notranslate\"><span class=\"pre\">default_args</span></code>.</p></li>\n<li><p><strong>op_kwargs</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 Any additional kwargs to pass to the underlying Airflow\noperator (a subclass of\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/operators/python_operator/index.html#airflow.operators.python_operator.PythonOperator\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">PythonOperator</span></code></a>).</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>The generated Airflow DAG, and a\nlist of its constituent tasks.</p>\n</dd>\n<dt class=\"field-odd\">Return type</dt>\n<dd class=\"field-odd\"><p>(<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\">airflow.models.DAG</a>, List[<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.BaseOperator\" title=\"(in Airflow v1.10.6)\">airflow.models.BaseOperator</a>])</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_airflow_dag_for_operator\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_airflow_dag_for_operator</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">recon_repo</em>, <em class=\"sig-param\">pipeline_name</em>, <em class=\"sig-param\">operator</em>, <em class=\"sig-param\">run_config=None</em>, <em class=\"sig-param\">mode=None</em>, <em class=\"sig-param\">dag_id=None</em>, <em class=\"sig-param\">dag_description=None</em>, <em class=\"sig-param\">dag_kwargs=None</em>, <em class=\"sig-param\">op_kwargs=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/factory/#make_airflow_dag_for_operator\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_airflow_dag_for_operator\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct an Airflow DAG corresponding to a given Dagster pipeline and custom operator.</p>\n<p><a class=\"reference external\" href=\"https://github.com/dagster-io/dagster/blob/master/python_modules/dagster-test/dagster_test/dagster_airflow/custom_operator.py\">Custom operator template</a></p>\n<p>Tasks in the resulting DAG will execute the Dagster logic they encapsulate run by the given\nOperator <a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.BaseOperator\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">BaseOperator</span></code></a>. If you\nare looking for a containerized solution to provide better isolation, see instead\n<a class=\"reference internal\" href=\"#dagster_airflow.make_airflow_dag_containerized\" title=\"dagster_airflow.make_airflow_dag_containerized\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">make_airflow_dag_containerized()</span></code></a>.</p>\n<p>This function should be invoked in an Airflow DAG definition file, such as that created by an\ninvocation of the dagster-airflow scaffold CLI tool.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>recon_repo</strong> (<code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">dagster.ReconstructableRepository</span></code>) \u2013 reference to a Dagster RepositoryDefinition\nthat can be reconstructed in another process</p></li>\n<li><p><strong>pipeline_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 The name of the pipeline definition.</p></li>\n<li><p><strong>operator</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.8)\"><em>type</em></a>) \u2013 The operator to use. Must be a class that inherits from\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.BaseOperator\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">BaseOperator</span></code></a></p></li>\n<li><p><strong>run_config</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 The environment config, if any, with which to compile\nthe pipeline to an execution plan, as a Python dict.</p></li>\n<li><p><strong>mode</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The mode in which to execute the pipeline.</p></li>\n<li><p><strong>instance</strong> (<em>Optional</em><em>[</em><a class=\"reference internal\" href=\"../../internals/#dagster.DagsterInstance\" title=\"dagster.DagsterInstance\"><em>DagsterInstance</em></a><em>]</em>) \u2013 The Dagster instance to use to execute the pipeline.</p></li>\n<li><p><strong>dag_id</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The id to use for the compiled Airflow DAG (passed through to\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a>).</p></li>\n<li><p><strong>dag_description</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The description to use for the compiled Airflow DAG\n(passed through to <a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a>)</p></li>\n<li><p><strong>dag_kwargs</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 Any additional kwargs to pass to the Airflow\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a> constructor, including <code class=\"docutils literal notranslate\"><span class=\"pre\">default_args</span></code>.</p></li>\n<li><p><strong>op_kwargs</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 Any additional kwargs to pass to the underlying Airflow\noperator.</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>The generated Airflow DAG, and a\nlist of its constituent tasks.</p>\n</dd>\n<dt class=\"field-odd\">Return type</dt>\n<dd class=\"field-odd\"><p>(<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\">airflow.models.DAG</a>, List[<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.BaseOperator\" title=\"(in Airflow v1.10.6)\">airflow.models.BaseOperator</a>])</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_airflow_dag_containerized\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_airflow_dag_containerized</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">module_name</em>, <em class=\"sig-param\">pipeline_name</em>, <em class=\"sig-param\">image</em>, <em class=\"sig-param\">run_config=None</em>, <em class=\"sig-param\">mode=None</em>, <em class=\"sig-param\">dag_id=None</em>, <em class=\"sig-param\">dag_description=None</em>, <em class=\"sig-param\">dag_kwargs=None</em>, <em class=\"sig-param\">op_kwargs=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/factory/#make_airflow_dag_containerized\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_airflow_dag_containerized\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct a containerized Airflow DAG corresponding to a given Dagster pipeline.</p>\n<p>Tasks in the resulting DAG will execute the Dagster logic they encapsulate by calling the\ndagster-graphql API exposed by a container run using a subclass of\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/operators/docker_operator/index.html#airflow.operators.docker_operator.DockerOperator\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DockerOperator</span></code></a>. As a\nconsequence, both dagster, any Python dependencies required by your solid logic, and the module\ncontaining your pipeline definition must be available in the container spun up by this operator.\nTypically you\u2019ll want to install these requirements onto the image you\u2019re using.</p>\n<p>This function should be invoked in an Airflow DAG definition file, such as that created by an\ninvocation of the dagster-airflow scaffold CLI tool.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>module_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 The name of the importable module in which the pipeline definition can be\nfound.</p></li>\n<li><p><strong>pipeline_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 The name of the pipeline definition.</p></li>\n<li><p><strong>image</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 The name of the Docker image to use for execution (passed through to\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/operators/docker_operator/index.html#airflow.operators.docker_operator.DockerOperator\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DockerOperator</span></code></a>).</p></li>\n<li><p><strong>run_config</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 The environment config, if any, with which to compile\nthe pipeline to an execution plan, as a Python dict.</p></li>\n<li><p><strong>mode</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The mode in which to execute the pipeline.</p></li>\n<li><p><strong>dag_id</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The id to use for the compiled Airflow DAG (passed through to\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a>).</p></li>\n<li><p><strong>dag_description</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>]</em>) \u2013 The description to use for the compiled Airflow DAG\n(passed through to <a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a>)</p></li>\n<li><p><strong>dag_kwargs</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 Any additional kwargs to pass to the Airflow\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DAG</span></code></a> constructor, including <code class=\"docutils literal notranslate\"><span class=\"pre\">default_args</span></code>.</p></li>\n<li><p><strong>op_kwargs</strong> (<em>Optional</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.8)\"><em>dict</em></a><em>]</em>) \u2013 Any additional kwargs to pass to the underlying Airflow\noperator (a subclass of\n<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/operators/docker_operator/index.html#airflow.operators.docker_operator.DockerOperator\" title=\"(in Airflow v1.10.6)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DockerOperator</span></code></a>).</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>The generated Airflow DAG, and a\nlist of its constituent tasks.</p>\n</dd>\n<dt class=\"field-odd\">Return type</dt>\n<dd class=\"field-odd\"><p>(<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.DAG\" title=\"(in Airflow v1.10.6)\">airflow.models.DAG</a>, List[<a class=\"reference external\" href=\"https://airflow.apache.org/_api/airflow/models/index.html#airflow.models.BaseOperator\" title=\"(in Airflow v1.10.6)\">airflow.models.BaseOperator</a>])</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_dagster_pipeline_from_airflow_dag\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_dagster_pipeline_from_airflow_dag</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">dag</em>, <em class=\"sig-param\">tags=None</em>, <em class=\"sig-param\">use_airflow_template_context=False</em>, <em class=\"sig-param\">unique_id=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/dagster_pipeline_factory/#make_dagster_pipeline_from_airflow_dag\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_dagster_pipeline_from_airflow_dag\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct a Dagster pipeline corresponding to a given Airflow DAG.</p>\n<p>Tasks in the resulting pipeline will execute the <code class=\"docutils literal notranslate\"><span class=\"pre\">execute()</span></code> method on the corresponding\nAirflow Operator. Dagster, any dependencies required by Airflow Operators, and the module\ncontaining your DAG definition must be available in the Python environment within which your\nDagster solids execute.</p>\n<p>To set Airflow\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">execution_date</span></code> for use with Airflow Operator\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">execute()</span></code> methods,\neither:</p>\n<ol class=\"arabic\">\n<li><dl>\n<dt>(Best for ad hoc runs) Run Pipeline with \u2018default\u2019 preset, which sets execution_date to the</dt><dd><p>time (in UTC) of pipeline invocation:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">execute_pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">pipeline</span><span class=\"o\">=</span><span class=\"n\">make_dagster_pipeline_from_airflow_dag</span><span class=\"p\">(</span><span class=\"n\">dag</span><span class=\"o\">=</span><span class=\"n\">dag</span><span class=\"p\">),</span>\n    <span class=\"n\">preset</span><span class=\"o\">=</span><span class=\"s1\">&#39;default&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</li>\n<li><p>Add <code class=\"docutils literal notranslate\"><span class=\"pre\">{'airflow_execution_date':</span> <span class=\"pre\">utc_date_string}</span></code> to the PipelineDefinition tags. This will\noverride behavior from (1).</p>\n<blockquote>\n<div><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">execute_pipeline</span><span class=\"p\">(</span>\n    <span class=\"n\">make_dagster_pipeline_from_airflow_dag</span><span class=\"p\">(</span>\n        <span class=\"n\">dag</span><span class=\"o\">=</span><span class=\"n\">dag</span><span class=\"p\">,</span>\n        <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;airflow_execution_date&#39;</span><span class=\"p\">:</span> <span class=\"n\">utc_execution_date_str</span><span class=\"p\">}</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n</div></blockquote>\n</li>\n<li><dl class=\"simple\">\n<dt>(Recommended) Add <code class=\"docutils literal notranslate\"><span class=\"pre\">{'airflow_execution_date':</span> <span class=\"pre\">utc_date_string}</span></code> to the PipelineRun tags,</dt><dd><p>such as in the Dagit UI. This will override behavior from (1) and (2)</p>\n</dd>\n</dl>\n</li>\n</ol>\n<p>We apply normalized_name() to the dag id and task ids when generating pipeline name and solid\nnames to ensure that names conform to Dagster\u2019s naming conventions.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>dag</strong> (<em>DAG</em>) \u2013 The Airflow DAG to compile into a Dagster pipeline</p></li>\n<li><p><strong>tags</strong> (<em>Dict</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a><em>, </em><a class=\"reference internal\" href=\"../../config/#dagster.Field\" title=\"dagster.Field\"><em>Field</em></a><em>]</em>) \u2013 Pipeline tags. Optionally include\n<cite>tags={\u2018airflow_execution_date\u2019: utc_date_string}</cite> to specify execution_date used within\nexecution of Airflow Operators.</p></li>\n<li><p><strong>use_airflow_template_context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 If True, will call get_template_context() on the\nAirflow TaskInstance model which requires and modifies the DagRun table.\n(default: False)</p></li>\n<li><p><strong>unique_id</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.8)\"><em>int</em></a>) \u2013 If not None, this id will be postpended to generated solid names. Used by\nframework authors to enforce unique solid names within a repo.</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>The generated Dagster pipeline</p>\n</dd>\n<dt class=\"field-odd\">Return type</dt>\n<dd class=\"field-odd\"><p>pipeline_def (<a class=\"reference internal\" href=\"../../pipeline/#dagster.PipelineDefinition\" title=\"dagster.PipelineDefinition\">PipelineDefinition</a>)</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_dagster_repo_from_airflow_dags_path\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_dagster_repo_from_airflow_dags_path</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">dag_path</em>, <em class=\"sig-param\">repo_name</em>, <em class=\"sig-param\">safe_mode=True</em>, <em class=\"sig-param\">store_serialized_dags=False</em>, <em class=\"sig-param\">use_airflow_template_context=False</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/dagster_pipeline_factory/#make_dagster_repo_from_airflow_dags_path\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_dagster_repo_from_airflow_dags_path\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct a Dagster repository corresponding to Airflow DAGs in dag_path.</p>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">DagBag.get_dag()</span></code> dependency requires Airflow DB to be initialized.</p>\n<dl>\n<dt>Usage:</dt><dd><p>Create <code class=\"docutils literal notranslate\"><span class=\"pre\">make_dagster_repo.py</span></code>:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">dagster_airflow.dagster_pipeline_factory</span> <span class=\"kn\">import</span> <span class=\"n\">make_dagster_repo_from_airflow_dags_path</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">make_repo_from_dir</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"n\">make_dagster_repo_from_airflow_dags_path</span><span class=\"p\">(</span>\n        <span class=\"s1\">&#39;/path/to/dags/&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;my_repo_name&#39;</span>\n    <span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Use RepositoryDefinition as usual, for example:\n<code class=\"docutils literal notranslate\"><span class=\"pre\">dagit</span> <span class=\"pre\">-f</span> <span class=\"pre\">path/to/make_dagster_repo.py</span> <span class=\"pre\">-n</span> <span class=\"pre\">make_repo_from_dir</span></code></p>\n</dd>\n</dl>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>dag_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 Path to directory or file that contains Airflow Dags</p></li>\n<li><p><strong>repo_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 Name for generated RepositoryDefinition</p></li>\n<li><p><strong>include_examples</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 True to include Airflow\u2019s example DAGs. (default: False)</p></li>\n<li><p><strong>safe_mode</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 True to use Airflow\u2019s default heuristic to find files that contain DAGs\n(ie find files that contain both b\u2019DAG\u2019 and b\u2019airflow\u2019) (default: True)</p></li>\n<li><p><strong>store_serialized_dags</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 True to read Airflow DAGS from Airflow DB. False to read DAGS\nfrom Python files. (default: False)</p></li>\n<li><p><strong>use_airflow_template_context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 If True, will call get_template_context() on the\nAirflow TaskInstance model which requires and modifies the DagRun table.\n(default: False)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>RepositoryDefinition</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_dagster_repo_from_airflow_dag_bag\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_dagster_repo_from_airflow_dag_bag</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">dag_bag</em>, <em class=\"sig-param\">repo_name</em>, <em class=\"sig-param\">refresh_from_airflow_db=False</em>, <em class=\"sig-param\">use_airflow_template_context=False</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/dagster_pipeline_factory/#make_dagster_repo_from_airflow_dag_bag\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_dagster_repo_from_airflow_dag_bag\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct a Dagster repository corresponding to Airflow DAGs in DagBag.</p>\n<dl>\n<dt>Usage:</dt><dd><dl>\n<dt>Create <cite>make_dagster_repo.py</cite>:</dt><dd><p>from dagster_airflow.dagster_pipeline_factory import make_dagster_repo_from_airflow_dag_bag\nfrom airflow_home import my_dag_bag</p>\n<dl class=\"simple\">\n<dt>def make_repo_from_dag_bag():</dt><dd><p>return make_dagster_repo_from_airflow_dag_bag(my_dag_bag, \u2018my_repo_name\u2019)</p>\n</dd>\n</dl>\n</dd>\n<dt>Use RepositoryDefinition as usual, for example:</dt><dd><p><cite>dagit -f path/to/make_dagster_repo.py -n make_repo_from_dag_bag</cite></p>\n</dd>\n</dl>\n</dd>\n</dl>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>dag_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 Path to directory or file that contains Airflow Dags</p></li>\n<li><p><strong>repo_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 Name for generated RepositoryDefinition</p></li>\n<li><p><strong>refresh_from_airflow_db</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 If True, will refresh DAG if expired via DagBag.get_dag(),\nwhich requires access to initialized Airflow DB. If False (recommended), gets dag from\nDagBag\u2019s dags dict without depending on Airflow DB. (default: False)</p></li>\n<li><p><strong>use_airflow_template_context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.8)\"><em>bool</em></a>) \u2013 If True, will call get_template_context() on the\nAirflow TaskInstance model which requires and modifies the DagRun table.\n(default: False)</p></li>\n</ul>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>RepositoryDefinition</p>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"dagster_airflow.make_dagster_repo_from_airflow_example_dags\">\n<code class=\"sig-prename descclassname\">dagster_airflow.</code><code class=\"sig-name descname\">make_dagster_repo_from_airflow_example_dags</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">repo_name='airflow_example_dags_repo'</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../../../../../_modules/dagster_airflow/dagster_pipeline_factory/#make_dagster_repo_from_airflow_example_dags\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#dagster_airflow.make_dagster_repo_from_airflow_example_dags\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Construct a Dagster repository for Airflow\u2019s example DAGs.</p>\n<dl class=\"simple\">\n<dt>Execution of the following Airflow example DAGs is not currently supported:</dt><dd><p>\u2018example_external_task_marker_child\u2019,\n\u2018example_pig_operator\u2019,\n\u2018example_skip_dag\u2019,\n\u2018example_trigger_target_dag\u2019,\n\u2018example_xcom\u2019,\n\u2018test_utils\u2019,</p>\n</dd>\n</dl>\n<p>Usage:</p>\n<blockquote>\n<div><dl>\n<dt>Create <cite>make_dagster_repo.py</cite>:</dt><dd><p>from dagster_airflow.dagster_pipeline_factory import make_dagster_repo_from_airflow_example_dags</p>\n<dl class=\"simple\">\n<dt>def make_airflow_example_dags():</dt><dd><p>return make_dagster_repo_from_airflow_example_dags()</p>\n</dd>\n</dl>\n</dd>\n<dt>Use RepositoryDefinition as usual, for example:</dt><dd><p><cite>dagit -f path/to/make_dagster_repo.py -n make_airflow_example_dags</cite></p>\n</dd>\n</dl>\n</div></blockquote>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><p><strong>repo_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.8)\"><em>str</em></a>) \u2013 Name for generated RepositoryDefinition</p>\n</dd>\n<dt class=\"field-even\">Returns</dt>\n<dd class=\"field-even\"><p>RepositoryDefinition</p>\n</dd>\n</dl>\n</dd></dl>\n\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["sections/api/apidocs/libraries/dagster_aws", "AWS (dagster_aws)", "N", "next"], ["sections/api/apidocs/utilities", "Utilities", "P", "previous"]], "sourcename": "sections/api/apidocs/libraries/dagster_airflow.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Airflow (dagster_airflow)</a></li>\n</ul>\n", "display_toc": false, "page_source_suffix": ".rst", "current_page_name": "sections/api/apidocs/libraries/dagster_airflow", "sidebars": ["globaltoc.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}